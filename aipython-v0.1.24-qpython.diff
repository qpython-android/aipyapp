diff --git a/aipyapp/__main__.py b/aipyapp/__main__.py
index 7af1fd6..cac6783 100644
--- a/aipyapp/__main__.py
+++ b/aipyapp/__main__.py
@@ -1,46 +1,24 @@
 #!/usr/bin/env python
 # coding: utf-8
-
-import argparse
 from pathlib import Path
 
-from .aipy.config import CONFIG_DIR
-
-config_help_message = (
-    f"Specify the configuration directory.\nDefaults to {CONFIG_DIR} if not provided."
-)
-
-def ensure_wxpython():
-    try:
-        import wx
-    except:
-        import sys
-        import subprocess
-
-        cp = subprocess.run([sys.executable, "-m", "pip", "install", 'wxpython'])
-        assert cp.returncode == 0
-
-def mainw():
-    def parse_args():
-        parser = argparse.ArgumentParser(description="Python use - AIPython")
-        parser.add_argument("-c", '--config-dir', type=str,
-                            help=config_help_message) # Use the generated help message
-        parser.add_argument('cmd', nargs='?', default=None, help="Task to execute, e.g. 'Who are you?'")
-        return parser.parse_args()
-    args = parse_args()
-
-    ensure_wxpython()
-    from .wxgui import main as aipy_main
-    aipy_main(args)
+from .aipy.config import SETTINGS_FILES
 
 def main():
+    settings_files_help = "\n".join(map(str, SETTINGS_FILES))
+
+    config_help_message = (
+        f"Toml config file. If not provided, searches in:\n{settings_files_help}"
+    )
 
     def parse_args():
-        parser = argparse.ArgumentParser(description="Python use - AIPython", formatter_class=argparse.RawTextHelpFormatter)
-        parser.add_argument("-c", '--config-dir', type=str,
+        import argparse
+        parser = argparse.ArgumentParser(description="AIPyApp on QPython", formatter_class=argparse.RawTextHelpFormatter)
+        parser.add_argument("-c", '--config', type=str, default="aipy.toml",
                             help=config_help_message) # Use the generated help message
         parser.add_argument('-p', '--python', default=False, action='store_true', help="Python mode")
         parser.add_argument('-g', '--gui', default=False, action='store_true', help="GUI mode")
+
         parser.add_argument('cmd', nargs='?', default=None, help="Task to execute, e.g. 'Who are you?'")
         return parser.parse_args()
 
@@ -49,8 +27,7 @@ def main():
     if args.python:
         from .main import main as aipy_main
     elif args.gui:
-        ensure_wxpython()
-        from .wxgui import main as aipy_main
+        from .gui import main as aipy_main
     else:
         from .saas import main as aipy_main
     aipy_main(args)
diff --git a/aipyapp/aipy/config.py b/aipyapp/aipy/config.py
index 02aaae1..4e41646 100644
--- a/aipyapp/aipy/config.py
+++ b/aipyapp/aipy/config.py
@@ -1,92 +1,17 @@
-import sys
-import time
-import requests # Import requests library
 import os
+import sys
 import re
-import io
-import datetime
-import webbrowser
 from pathlib import Path
 
 from dynaconf import Dynaconf
 from rich import print
-import tomli_w
-import qrcode
-
-
-from .i18n import T
-
-__PACKAGE_NAME__ = "aipyapp"
-
-OLD_SETTINGS_FILES = [
-    Path.home() / '.aipy.toml',
-    Path('aipython.toml').resolve(),
-    Path('.aipy.toml').resolve(),
-    Path('aipy.toml').resolve()
-]
-
-# Coordinator æœåŠ¡å™¨åœ°å€
-COORDINATOR_URL = os.getenv('COORDINATOR_URL', 'https://api.trustoken.ai/api')
-POLL_INTERVAL = 5 # è½®è¯¢é—´éš”ï¼ˆç§’ï¼‰
-CONFIG_FILE_NAME = f"{__PACKAGE_NAME__}.toml"
-USER_CONFIG_FILE_NAME = "user_config.toml"
-
-def init_config_dir():
-    """
-    è·å–å¹³å°ç›¸å…³çš„é…ç½®ç›®å½•ï¼Œå¹¶ç¡®ä¿ç›®å½•å­˜åœ¨
-    """
-    if sys.platform == "win32":
-        # Windows è·¯å¾„
-        app_data = os.environ.get("APPDATA")
-        if app_data:
-            config_dir = Path(app_data) / __PACKAGE_NAME__
-        else:
-            config_dir = Path.home() / "AppData" / "Roaming" / __PACKAGE_NAME__
-    else:
-        # Linux/macOS è·¯å¾„
-        config_dir = Path.home() / ".config" / __PACKAGE_NAME__
-
-    # ç¡®ä¿ç›®å½•å­˜åœ¨
-    try:
-        config_dir.mkdir(parents=True, exist_ok=True)
-    except PermissionError:
-        print(T('permission_denied_error').format(config_dir))
-        raise
-    except Exception as e:
-        print(T('error_creating_config_dir').format(config_dir, str(e)))
-        raise
-
-    return config_dir
-
-CONFIG_DIR = init_config_dir()
-
-def get_config_file_path(config_dir=None, file_name=CONFIG_FILE_NAME):
-    """
-    è·å–é…ç½®æ–‡ä»¶çš„å®Œæ•´è·¯å¾„
-    :return: é…ç½®æ–‡ä»¶çš„å®Œæ•´è·¯å¾„
-    """
-    if config_dir:
-        config_dir = Path(config_dir)
-    else:
-        config_dir = CONFIG_DIR
 
-    config_file_path = config_dir / file_name
 
-    # å¦‚æœé…ç½®æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶
-    if not config_file_path.exists():
-        try:
-            config_file_path.touch()
-        except Exception as e:
-            print(T('error_creating_config_dir').format(config_file_path, str(e)))
-            raise
+from .i18n import T, set_lang
 
-    return config_file_path
+SETTINGS_FILES = [Path.home() / '.aipy.toml', Path('aipython.toml').resolve(), Path('.aipy.toml').resolve(), Path('aipy.toml').resolve()]
 
-def lowercase_keys(d):
-    """é€’å½’åœ°å°†å­—å…¸ä¸­çš„æ‰€æœ‰é”®è½¬æ¢ä¸ºå°å†™"""
-    if not isinstance(d, dict):
-        return d
-    return {k.lower(): lowercase_keys(v) for k, v in d.items()}
+set_lang((os.getenv('LANG')[:2] if os.getenv('LANG') else "en"))
 
 def is_valid_api_key(api_key):
     """
@@ -95,261 +20,86 @@ def is_valid_api_key(api_key):
     :param api_key: å¾…æ ¡éªŒçš„ API Key å­—ç¬¦ä¸²
     :return: å¦‚æœæ ¼å¼æœ‰æ•ˆè¿”å› Trueï¼Œå¦åˆ™è¿”å› False
     """
-    pattern = r"^[A-Za-z0-9_-]{8,128}$"
+    pattern = r"^[A-Za-z0-9+/=-]{8,128}$"
     return bool(re.match(pattern, api_key))
 
-def request_binding():
-    """å‘ Coordinator è¯·æ±‚ç»‘å®š"""
-    url = f"{COORDINATOR_URL}/request_bind"
-    try:
-        response = requests.post(url, timeout=10)
-        response.raise_for_status()
-
-        data = response.json()
-        approval_url = data['approval_url']
-        request_id = data['request_id']
-        expires_in = data['expires_in']
-
-        print(T('binding_request_sent').format(request_id, approval_url, expires_in))
-        print(T('scan_qr_code'))
-
-        try:
-            qr = qrcode.QRCode(
-                error_correction=qrcode.constants.ERROR_CORRECT_L,
-                border=1
-            )
-            qr.add_data(approval_url)
-            qr.make(fit=True)
-            qr.print_ascii(tty=True)
-            print("\n")
-        except Exception as e:
-            print(T('qr_code_display_failed').format(e))
-
-        return data['request_id']
-
-    except requests.exceptions.RequestException as e:
-        print(T('coordinator_request_error').format(e))
-        return None
-    except Exception as e:
-        print(T('unexpected_request_error').format(e))
-        return None
-
-def poll_status(request_id, save_func=None):
-    """è½®è¯¢ç»‘å®šçŠ¶æ€"""
-    url = f"{COORDINATOR_URL}/check_status"
-    params = {'request_id': request_id}
-    start_time = time.time()
-    polling_timeout = 310
-
-    print(T('waiting_for_approval'))
-    try:
-        while time.time() - start_time < polling_timeout:
-            try:
-                response = requests.get(url, params=params, timeout=10)
-                response.raise_for_status()
-
-                data = response.json()
-                status = data.get('status')
-                print(T('current_status').format(status))
-
-                if status == 'approved':
-                    if save_func:
-                        save_func(data['secret_token'])
-                    return True
-                elif status == 'expired':
-                    print(T('binding_expired'))
-                    return False
-                elif status == 'pending':
-                    pass
-                else:
-                    print(T('unknown_status').format(status))
-                    return False
-
-            except requests.exceptions.RequestException as e:
-                print(T('coordinator_polling_error').format(e))
-                time.sleep(POLL_INTERVAL)
-            except Exception as e:
-                print(T('unexpected_polling_error').format(e))
-                return False
-
-            time.sleep(POLL_INTERVAL)
-    except KeyboardInterrupt:
-        print(T('polling_cancelled'))
-        return False
-
-    print(T('polling_timeout'))
-    return False
-
-def fetch_token(save_func):
-    """ä» Coordinator è·å– Token å¹¶ä¿å­˜"""
-    print(T('start_binding_process'))
-    req_id = request_binding()
-    if req_id:
-        if poll_status(req_id, save_func):
-            print(T('binding_success'))
-        else:
-            print(T('binding_failed'))
-            sys.exit(1)
-    else:
-        print(T('binding_request_failed'))
-        sys.exit(1)
 
 class ConfigManager:
-    def __init__(self, default_config="default.toml",  config_dir=None):
-        self.config_file = get_config_file_path(config_dir)
-        self.user_config_file = get_config_file_path(config_dir, USER_CONFIG_FILE_NAME)
+    def __init__(self, default_config="default.toml", user_config="aipy.toml"):
         self.default_config = default_config
+        self.user_config = user_config
         self.config = self._load_config()
 
-        # old user config, without default config.
-        self._old_user_config = Dynaconf(
-            settings_files=OLD_SETTINGS_FILES,
-            envvar_prefix="AIPY", merge_enabled=True
-        )
-        #print(self.config.to_dict())
-        #print(self._old_user_config.to_dict())
-
     def _load_config(self):
-        config = Dynaconf(
-            settings_files=[self.default_config, self.config_file, self.user_config_file],
-            envvar_prefix="AIPY",
-        )
-        #print(config.to_dict())
+        try:
+            settings_files = [self.default_config] + SETTINGS_FILES[:-1] + [Path(self.user_config).resolve()]
+
+            config = Dynaconf(
+                settings_files=settings_files,
+                envvar_prefix="AIPY", merge_enabled=True
+            )
+        except Exception as e:
+            print(T('error_loading_config').format(e))
+            config = None
         return config
 
     def get_config(self):
         return self.config
 
-    def save_tt_config(self, api_key):
-        config = {
-            'llm': {
-                'trustoken': {
-                    'api_key': api_key,
-                    'type': 'trust',
-                    'base_url': 'https://api.trustoken.ai/v1',
-                    'model': 'auto',
-                    'default': True,
-                    'enable': True
-                }
-            }
-        }
-        header_comments = [
-            f"# Configuration file for {__PACKAGE_NAME__}",
-            "# Auto-generated on " + datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S"),
-            f"# è¯·å‹¿ç›´æ¥ä¿®æ”¹æ­¤æ–‡ä»¶ï¼Œé™¤éæ‚¨äº†è§£å…·ä½“é…ç½®æ ¼å¼ï¼Œå¦‚æœè‡ªå®šä¹‰é…ç½®ï¼Œè¯·æ”¾åˆ°{self.user_config_file}",
-            f"# Please do not edit this file directly unless you understand the format. If you want to customize the configuration, please edit {self.user_config_file}",
-            ""
-        ]
-        footer_comments = [
-            "",
-            "# End of configuration file"
-        ]
-
-        with open(self.config_file, "w", encoding="utf-8") as f:
-            # 1. å†™å…¥å¤´éƒ¨æ³¨é‡Š
-            f.write("\n".join(header_comments) + "\n")
-
-            # 2. å†™å…¥ TOML å†…å®¹åˆ°ä¸´æ—¶å†…å­˜æ–‡ä»¶
-
-            temp_buffer = io.BytesIO()
-            tomli_w.dump(config, temp_buffer)
-            toml_content = temp_buffer.getvalue().decode('utf-8')
-
-            # 3. å†™å…¥ TOML å†…å®¹
-            f.write(toml_content)
-
-            # 4. å†™å…¥å°¾éƒ¨æ³¨é‡Š
-            f.write("\n".join(footer_comments))
-
-        return config
-
     def check_config(self):
+        if not self.config:
+            print(T('config_file_error'))
+            return
 
+        self.check_llm()
+
+    def check_llm(self):
         if not self.config:
             print(T('config_not_loaded'))
             return
-        tt = self.config.get('llm', {}).get('trustoken', {})
-        if tt and tt.get('api_key') and tt.get('type') == 'trust':
-            # valid tt config
-            #print("trustoken config found")
-            return
-        elif self._old_user_config.to_dict():
-            # no tt config, try to migrate from old config
-            # remove this later.
-            self._migrate_old_config(self._old_user_config)
-        else:
-            # try to fetch config from web.
-            fetch_token(self.save_tt_config)
-        
-        # reload config
-        self.config = self._load_config()
 
-    def _migrate_old_config(self, old_config):
-        """
-        ä»old_configä¸­æå–ç¬¦åˆç‰¹å®šæ¡ä»¶çš„API keysï¼Œå¹¶ä»åŸå§‹é…ç½®ä¸­åˆ é™¤
-        
-        è¿”å›: æå–çš„API keyså­—å…¸ï¼Œæ ¼å¼ä¸º {é…ç½®åç§°: API key}
-        """
-        if not old_config:
-            return {}
+        llm = self.config.get("llm")
+        if not llm:
+            print(T('llm_config_not_found'))
 
-        tt_keys = []
+        llms = {}
+        for name, config in self.config.get('llm', {}).items():
+            if config.get("enable", True):
+                llms[name] = config
 
-        # å¤„ç†é¡¶çº§é…ç½®
-        llm = old_config.get('llm', {})
-        for section_name, section_data in list(llm.items()):
-            # è·³è¿‡éå­—å…¸ç±»å‹çš„é…ç½®
-            if not isinstance(section_data, dict):
-                continue
+        if not llms:
+            self._init_llm()
+
+    def _init_llm(self):
+        print(T('pgpttoken_register_instruction').format(self.user_config))
 
-            # æ£€æŸ¥é¡¶çº§é…ç½®
-            if self._is_tt_config(section_name, section_data):
-                api_key = section_data.get('api_key', '')
-                if api_key:
-                    tt_keys.append(api_key)
-                # ä»åŸé…ç½®ä¸­åˆ é™¤
-                llm.pop(section_name)
+        while True:
+            user_token = input(T('prompt_token_input')).strip()
+            if user_token.lower() == "exit":
+                print(T('exit_token_prompt'))
+                sys.exit(0)
+            if not user_token:
+                print(T('no_token_detected'))
+                continue
+            if not is_valid_api_key(user_token):
+                print(T('invalid_token'))
+                continue
 
-        #print("keys found:", tt_keys)
+            self.save_trustoken(user_token)
 
-        if tt_keys:
-            # ä¿å­˜ç¬¬ä¸€ä¸ªæ‰¾åˆ°çš„API key
-            self.save_tt_config(tt_keys[0])
+            self.config = self._load_config()
+            break
 
-        #print(old_config.to_dict())
-        # å°† old_config è½¬æ¢ä¸º dict
-        config_dict = lowercase_keys(old_config.to_dict())
+    def save_trustoken(self, token):
+        config_file = self.user_config
         try:
-            with open(self.user_config_file, "wb") as f:
-                tomli_w.dump(config_dict, f)
-                print(T('migrate_config').format(self.user_config_file))
+            with open(config_file, "a") as f:
+                f.write("\n[llm.pgpt]\n")
+                f.write(f'api_key = "{token}"\n')
+                f.write('base_url = "https://openai.pgpt.cloud/v1/"\n')
+                f.write('model = "auto"\n')
+                f.write("default = true\n")
+                f.write("enable = true\n")
+            print(T('token_saved').format(config_file))
         except Exception as e:
-            print(T('error_saving_config').format(self.user_config_file, str(e)))
-        return
-
-    def _is_tt_config(self, name, config):
-        """
-        åˆ¤æ–­é…ç½®æ˜¯å¦ç¬¦åˆç‰¹å®šæ¡ä»¶
-        
-        å‚æ•°:
-            name: é…ç½®åç§°
-            config: é…ç½®å†…å®¹å­—å…¸
-        
-        è¿”å›: å¦‚æœç¬¦åˆæ¡ä»¶è¿”å›True
-        """
-        # æ¡ä»¶1: é…ç½®åç§°åŒ…å«ç›®æ ‡å…³é”®å­—
-        if any(keyword in name.lower() for keyword in ['trustoken', 'trust']):
-            return True
-
-        # æ¡ä»¶2: base_urlåŒ…å«ç›®æ ‡åŸŸå
-        if isinstance(config, dict) and 'base_url' in config:
-            base_url = config['base_url'].lower()
-            if 'trustoken.ai' in base_url:
-                return True
-
-        # æ¡ä»¶3: å…¶ä»–ç‰¹å®šæ ‡è®°
-        # type == trust, ä¸”æ²¡æœ‰base_url.
-        if isinstance(config, dict) and config.get('type') == 'trust' and not config.get('base_url'):
-            return True
-        
-        return False
\ No newline at end of file
+            print(T('token_save_error').format(e))
diff --git a/aipyapp/aipy/i18n.py b/aipyapp/aipy/i18n.py
index afdf834..f4ac80a 100644
--- a/aipyapp/aipy/i18n.py
+++ b/aipyapp/aipy/i18n.py
@@ -56,6 +56,14 @@ MESSAGES = {
             "ç‚¹å‡»â€œå¤åˆ¶â€æŒ‰é’®ï¼Œå¤åˆ¶ä»¤ç‰Œåˆ°å‰ªè´´æ¿ã€‚åœ¨ä¸‹é¢è¿›è¡Œç²˜è´´ã€‚\n"
             "å¦å¤–ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©é€€å‡ºï¼Œç„¶åæ‰‹åŠ¨ç¼–è¾‘é…ç½®æ–‡ä»¶ {}ï¼Œé…ç½®è‡ªå·±å·²æœ‰çš„å…¶ä»–å¤§æ¨¡å‹ä»¤ç‰Œ"
         ),
+        'pgpttoken_register_instruction': (
+            "å½“å‰ç¯å¢ƒç¼ºå°‘é…ç½®æ–‡ä»¶ï¼Œéœ€è¦æ³¨å†ŒPGPTè´¦å·è·å–è¯•ç”¨Tokenã€‚\n"
+            "è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š\n"
+            "1. è®¿é—® https://user.pgpt.cloud/ å®Œæˆè´¦å·æ³¨å†Œ\n"
+            "2. ç™»å½•ååˆ›å»ºAppï¼ˆé€‰æ‹©deepseekï¼‰ã€‚æ“ä½œè¯¦è§æ–‡æ¡£ https://docs.pgpt.cloud/\n"
+            "3. è·å–API Keyå¹¶å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œç„¶ååœ¨æ­¤ç²˜è´´\n"
+            "æ‚¨ä¹Ÿå¯ä»¥é€‰æ‹©é€€å‡ºï¼Œç„¶åæ‰‹åŠ¨ç¼–è¾‘é…ç½®æ–‡ä»¶ {} æ¥é…ç½®å·²æœ‰çš„å…¶ä»–å¤§æ¨¡å‹Token"
+        ),
         'prompt_token_input': "è¯·ç²˜è´´ä»¤ç‰Œå¹¶æŒ‰ Enter é”® (è¾“å…¥ 'exit' é€€å‡º): ",
         'exit_token_prompt': "é€€å‡ºä»¤ç‰Œè¾“å…¥æµç¨‹ã€‚",
         'no_token_detected': "æœªæ£€æµ‹åˆ°ä»¤ç‰Œè¾“å…¥ã€‚",
@@ -136,6 +144,14 @@ MESSAGES = {
             "Click the 'copy' button to copy your token to the clipboard and paste it here.\n"
             "Alternatively, you can exit now, and manually edit the configuration file {} to configure your existing LLM token."
         ),
+        'pgpttoken_register_instruction': (
+            "The current environment is missing configuration files. You need to register a PGPT account to get trial tokens.\n"
+            "Please follow these steps:\n"
+            "1. Visit https://user.pgpt.cloud/ to complete account registration\n"
+            "2. After logging in, create an App (please select deepseek). See documentation: https://docs.pgpt.cloud/\n"
+            "3. Get your API Key, copy it to clipboard, then paste it here\n"
+            "Alternatively, you can exit and manually edit the configuration file {} to set up tokens for other existing LLM models"
+        ),
         'prompt_token_input': "Please paste the token and press Enter (type 'exit' to quit): ",
         'exit_token_prompt': "Exiting token input process.",
         'no_token_detected': "No token detected.",
diff --git a/aipyapp/aipy/llm.py b/aipyapp/aipy/llm.py
index 8cf3bb4..c25a03f 100644
--- a/aipyapp/aipy/llm.py
+++ b/aipyapp/aipy/llm.py
@@ -59,7 +59,7 @@ class LiveManager:
         self.live = Live(console=console, auto_refresh=False, vertical_overflow='visible', transient=True)
         self.live.__enter__()
         status = self.console.status(f"[dim white]{self.name} {T('thinking')}...", spinner='runner')
-        response_panel = Panel(status, title=self.title, border_style="blue")
+        response_panel = Panel(status, title=f"[blue] ğŸ¤–ï¸ {self.title} ")
         self.live.update(response_panel, refresh=True)
         return self
 
@@ -76,10 +76,10 @@ class LiveManager:
         full_response = self.lr.content
         try:
             md = Markdown(full_response)
-            response_panel = Panel(md, title=self.title, border_style="green")
+            response_panel = Panel(md, title=f"[green] ğŸ¤–ï¸ {self.title} ")
         except Exception:
             text = Text(full_response)
-            response_panel = Panel(text, title=self.title, border_style="yellow")
+            response_panel = Panel(text, title=f"[yellow] ğŸ¤–ï¸ {self.title} ")
         self.live.update(response_panel, refresh=True)
         self.response_panel = response_panel
         self.full_response = full_response
@@ -427,13 +427,18 @@ class AzureOpenAIClient(OpenAIBaseClient):
     def _get_client(self):
         from openai import AzureOpenAI
         return AzureOpenAI(azure_endpoint=self._end_point, api_key=self._api_key, api_version="2024-02-01")
-            
+
+class PGPTAIClient(OpenAIBaseClient):
+    BASE_URL = "https://openai.pgpt.cloud/v1/"
+    MODEL = "auto"
+
 class LLM(object):
     CLIENTS = {
         "openai": OpenAIClient,
         "ollama": OllamaClient,
         "claude": ClaudeClient,
         "gemini": GeminiClient,
+        "pgptai": PGPTAIClient,
         "deepseek": DeepSeekClient,
         'grok': GrokClient,
         'trust': TrustClient,
diff --git a/aipyapp/aipy/prompt.py b/aipyapp/aipy/prompt.py
index 3db0629..01a81e6 100644
--- a/aipyapp/aipy/prompt.py
+++ b/aipyapp/aipy/prompt.py
@@ -1,9 +1,20 @@
 #!/usr/bin/env python
 # coding: utf-8
 
-SYSTEM_PROMPT = """
-# ä»£ç å—æ ¼å¼è§„èŒƒ
+def get_first_two_lines(docstring):
+    if docstring:
+        lines = docstring.split('\n')
+        # æ£€æŸ¥å‰ä¸¤è¡Œæ˜¯å¦éƒ½æœ‰å†…å®¹
+        if len(lines) >= 2 and lines[0].strip() and lines[1].strip():
+            return ': '.join(lines[:2])
+        # å¦‚æœåªæœ‰ä¸€è¡Œä¸”æœ‰å†…å®¹ï¼Œè¿”å›ç¬¬ä¸€è¡Œ
+        elif len(lines) == 1 and lines[0].strip():
+            return lines[0].strip()
+    # å¦‚æœæ²¡æœ‰å†…å®¹ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²
+    return ""
 
+SYSTEM_PROMPT = """
+<ä»£ç å—æ ¼å¼è§„èŒƒ>
 å›å¤æ¶ˆæ¯ä½¿ç”¨æ ‡å‡† Markdown æ ¼å¼ï¼Œè¯·åœ¨å›ç­”ä¸­ä½¿ç”¨ä»¥ä¸‹æ ¼å¼æ ‡è®°æ‰€æœ‰ä»£ç å—ï¼š
 
 ````lang name
@@ -35,14 +46,41 @@ def greet(name):
   "setting": "value"
 }
 ````
+</ä»£ç å—æ ¼å¼è§„èŒƒ>
 
-# Python è¿è¡Œç¯å¢ƒæè¿°
 
+<Python è¿è¡Œç¯å¢ƒæè¿°>
 ## å¯ç”¨æ¨¡å—
 - Python è‡ªå¸¦çš„æ ‡å‡†åº“æ¨¡å—ã€‚
-- é¢„è£…çš„ç¬¬ä¸‰æ–¹æ¨¡å—æœ‰ï¼š`requests`ã€`numpy`ã€`pandas`ã€`matplotlib`ã€`seaborn`ã€`bs4`ã€`googleapiclient`ã€‚
+- QPython è‡ªå¸¦çš„æ ‡å‡†æ¨¡å—ï¼š`qpy`, `androidhelper`ã€‚
+- é¢„è£…çš„ç¬¬ä¸‰æ–¹æ¨¡å—æœ‰ï¼š`requests`ã€`numpy`ã€`pandas`ã€`matplotlib`ã€`plotpy`ã€`seaborn`ã€`bs4`ã€`google-api-python-client`ã€‚
 - åœ¨å¿…è¦æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡ä¸‹è¿° runtime å¯¹è±¡çš„ install_packages æ–¹æ³•ç”³è¯·å®‰è£…é¢å¤–æ¨¡å—ã€‚
 
+## ç¨‹åºå¤´éƒ¨
+æ¯ä¸ªç¨‹åºæŠ•è¶³è‡ªåŠ¨åŠ å…¥ä»¥ä¸‹ä»£ç ï¼š
+```python
+# -*- coding: utf8; -*-
+# Generated by AIPyApp@QPython
+import qpy
+```
+
+## QPython qpy è·¯å¾„
+å½“å‰çš„é¡¹ç›®è¿è¡Œäºæ‰‹æœºçš„Python - QPythonå¹³å°ä¹‹ä¸Šï¼Œqpyæ˜¯ä¸€ä¸ªå†…ç½®çš„æ¨¡å—ï¼Œå®ƒå®šä¹‰äº†ä¸€äº›è·¯å¾„å˜é‡ï¼Œåœ¨ä½¿ç”¨QPYå¼€å‘æ—¶ä¼šç»å¸¸ä½¿ç”¨ï¼š
+- QPYç¼“å­˜ç›®å½•ï¼Œå­˜å‚¨åœ¨ qpy.tmp è¿™ä¸ªå˜é‡é‡Œ
+- QPYè„šæœ¬ç›®å½•ï¼Œä¹Ÿå«QPYç¨‹åºç›®å½•ï¼Œç”¨äºå­˜æ”¾QPYè„šæœ¬ï¼Œå­˜å‚¨åœ¨ qpy.scripts è¿™ä¸ªå˜é‡é‡Œ
+- QPYé¡¹ç›®æ ¹ç›®å½•ï¼Œä¹Ÿå«QPYåº”ç”¨æ ¹ç›®å½•ï¼Œç”¨äºå­˜æ”¾QPYé¡¹ç›®ï¼Œå­˜å‚¨åœ¨ qpy.projects è¿™ä¸ªå˜é‡é‡Œ
+- QPYç¬”è®°ç›®å½•ï¼Œä¹Ÿå«QPY Notebookç›®å½•ï¼Œç”¨äºå­˜æ”¾QPYç¬”è®°ï¼Œå­˜å‚¨åœ¨ qpy.notebooks è¿™ä¸ªå˜é‡é‡Œ
+
+å½“éœ€è¦ä½¿ç”¨è¿™äº›ç›®å½•æ—¶ï¼Œéœ€è¦å…ˆå¼•å…¥qpyï¼Œå†è¿›è¡Œä½¿ç”¨ï¼Œæ¯”å¦‚ï¼š
+```python
+import os
+import qpy
+script_file = os.path.join(qpy.scripts,  "test_script.py") # å¦‚æœå½“å‰å¼€å‘çš„è„šæœ¬æ–‡ä»¶åä¸ºtest_script.pyï¼Œèƒ½é€šè¿‡è¿™ç§æ–¹æ³•å¾—åˆ°QPYè„šæœ¬å…¨è·¯å¾„
+project_dir = os.path.join(qpy.projects,  "todoApp") # å¦‚æœå½“å‰å¼€å‘çš„ç›®å½•åä¸ºtodoAppï¼Œèƒ½é€šè¿‡è¿™ç§æ–¹æ³•å¾—åˆ°QPYé¡¹ç›®ç›®å½•å…¨è·¯å¾„
+notebook_file = os.path.join(qpy.notebooks,  "hello.ipynb") # å¦‚æœå½“å‰åœ¨å¼€å‘çš„ç¬”è®°åä¸ºhello.ipynbï¼Œèƒ½é€šè¿‡è¿™ç§æ–¹æ³•å¾—åˆ°QPYç¬”è®°å…¨è·¯å¾„
+```
+
+## Matplotlib æ³¨æ„äº‹é¡¹
 åœ¨ä½¿ç”¨ matplotlib æ—¶ï¼Œéœ€è¦æ ¹æ®ç³»ç»Ÿç±»å‹é€‰æ‹©å’Œè®¾ç½®åˆé€‚çš„ä¸­æ–‡å­—ä½“ï¼Œå¦åˆ™å›¾ç‰‡é‡Œä¸­æ–‡ä¼šä¹±ç å¯¼è‡´æ— æ³•å®Œæˆå®¢æˆ·ä»»åŠ¡ã€‚
 ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š
 ```python
@@ -88,7 +126,7 @@ else:
 ```
 
 ### runtime.display æ–¹æ³•
-å¦‚æœ TERM ç¯å¢ƒå˜é‡ä¸º `xterm-256color` æˆ–è€… LC_TERMINAL ç¯å¢ƒå˜é‡ä¸º `iTerm2`ï¼Œä½ å¯ä»¥ç”¨ä½¿ç”¨è¿™ä¸ªæ–¹æ³•åœ¨ç»ˆç«¯ä¸Šæ˜¾ç¤ºå›¾ç‰‡ã€‚
+å¦‚æœ TERM ç¯å¢ƒå˜é‡ä¸º `xterm-256color` æˆ– `xterm` æˆ– `screen-256color` æˆ–è€… LC_TERMINAL ç¯å¢ƒå˜é‡ä¸º `iTerm2`ï¼Œä½ å¯ä»¥ç”¨ä½¿ç”¨è¿™ä¸ªæ–¹æ³•åœ¨ç»ˆç«¯ä¸Šæ˜¾ç¤ºå›¾ç‰‡ã€‚
 ç¤ºä¾‹ï¼š
 ```python
 runtime.display(path="path/to/image.png")
@@ -144,7 +182,200 @@ def main():
 ```
 ä¾‹å¦‚ï¼Œå¦‚æœéœ€è¦åˆ†æå®¢æˆ·ç«¯çš„æ–‡ä»¶ï¼Œä½ å¯ä»¥ç”Ÿæˆä»£ç è¯»å–æ–‡ä»¶å†…å®¹æ”¾å…¥ __result__å˜é‡è¿”å›ååˆ†æã€‚
 
-# ç”ŸæˆPythonä»£ç è§„åˆ™
+## QPython androidhelper æ¨¡å—
+Android è„šæœ¬å±‚ï¼ˆç®€ç§° SL4Aï¼Œä¹‹å‰ç§°ä¸º Android è„šæœ¬ç¯å¢ƒæˆ– ASEï¼‰æ˜¯ä¸€ä¸ªåº“ï¼Œå…è®¸ç›´æ¥åœ¨ Android è®¾å¤‡ä¸Šåˆ›å»ºå’Œè¿è¡Œç”¨å„ç§è„šæœ¬è¯­è¨€ç¼–å†™çš„è„šæœ¬ã€‚QPython ç»§æ‰¿å’Œæ‰©å±•äº† SL4A é¡¹ç›®ä¸º QSL4Aï¼Œå¹¶å°†å…¶é›†æˆä¸ºä¸€ä¸ªåä¸º androidhelper çš„å†…ç½®åº“ã€‚åœ¨æåˆ° QPY SL4Aã€QPython SL4Aã€QSL4A æˆ– QPY Android æ¨¡å—æ—¶ï¼Œæˆ‘ä»¬æŒ‡çš„æ˜¯é€šè¿‡ä½¿ç”¨ androidhelper æ¨¡å—æ¥å£è¿›è¡Œå¼€å‘çš„ç¨‹åºã€‚
+éœ€è¦æ³¨æ„ï¼Œå¤§éƒ¨åˆ†çš„QSL4Aæ¥å£åœ¨è°ƒç”¨æ—¶ï¼Œå¦‚æœæ²¡æœ‰è¿”å›è¾“å‡ºï¼Œåˆ™è¡¨ç¤ºæˆåŠŸ
+
+### QPython androidhelper æœ‰ä¸‹åˆ—å¸¸ç”¨äºç¼–ç¨‹ååŠ©çš„æ¥å£ï¼š
+- viewHtml(path, title=None, wait=True) : ç”¨äºè°ƒç”¨æµè§ˆå™¨æ‰“å¼€æœ¬åœ°çš„æ–‡ä»¶æˆ–è€…ç½‘å€ï¼›å½“æŒ‡ä»¤ä¸ºç±»ä¼¼"ç”¨æµè§ˆå™¨æ‰“å¼€"æ—¶ï¼Œè°ƒç”¨è¯¥å‡½æ•°
+- executeQPy(scriptPath, arg=None) : ç”¨äºè°ƒç”¨ QPython Python å¼•æ“æ¥æ‰§è¡ŒscriptPathä¼ é€’è¿‘æ¥çš„è·¯å¾„ï¼›å½“æŒ‡ä»¤ä¸º"ç”¨QPYè¿è¡Œ"æˆ–"ç”¨QPYæ‰§è¡Œ"æˆ–"ç”¨QPYTHONæ‰§è¡Œ"æˆ–"ç”¨qpythonè¿è¡Œ"æ—¶ï¼Œå¹¶ä¸”åªæœ‰åŒ…å«QPYæˆ–è€…QPYTHONå…³é”®è¯æ—¶ï¼Œæ‰è°ƒç”¨è¯¥å‡½æ•°
+- editorOpen(path) : ç”¨äºè°ƒç”¨ QPython ç¼–è¾‘å™¨æ‰“å¼€æŒ‡å®šæ–‡ä»¶ï¼›å½“æŒ‡ä»¤ä¸º"ç”¨ç¼–è¾‘å™¨æ‰“å¼€"æ—¶ï¼Œè°ƒç”¨è¯¥å‡½æ•°
+- notebookOpen(path) : ç”¨äºè°ƒç”¨ QPython Notebookæ‰“å¼€æŒ‡å®šçš„ç¬”è®°ï¼›å½“æŒ‡ä»¤ä¸ºâ€œç”¨ç¬”è®°æ‰“å¼€â€æˆ–è€…"ç”¨Notebookæ‰“å¼€"æ—¶ï¼Œè¯·è°ƒç”¨è¯¥å‡½æ•°
+- mediaPlay(url, targ="default", play=True) : ç”¨äºè°ƒç”¨åª’ä½“æ’­æ”¾å™¨æ‰“å¼€æŒ‡å®š url åª’ä½“èµ„æºï¼›å½“æŒ‡ä»¤ä¸º "æ’­æ”¾" ä¸”ç›®æ ‡ä¸ºéŸ³å±ï¼Œè°ƒç”¨è¯¥å‡½æ•°
+- videoPlay(path, wait=True) : ç”¨äºè°ƒç”¨è§†é¢‘æ’­æ”¾å™¨æ‰“å¼€æŒ‡å®š è·¯å¾„çš„è§†é¢‘æ–‡ä»¶ï¼›å½“æŒ‡ä»¤ä¸º "æ’­æ”¾" ä¸”ç›®æ ‡ä¸ºè§†é¢‘æˆ–è€…å›¾ç‰‡æ—¶ï¼Œè°ƒç”¨è¯¥å‡½æ•°
+- sendFile(path, type=None, extras=None, wait=True) : ç”¨äºè°ƒç”¨å®‰å“ç³»ç»Ÿçš„åˆ†äº«åŠŸèƒ½åˆ†äº«æ–‡ä»¶ï¼›å½“æŒ‡ä»¤ä¸º "åˆ†äº«" æ—¶ï¼Œè°ƒç”¨è¯¥å‡½æ•°
+
+QSL4Aæ¥å£è°ƒç”¨æ–¹æ³•ç¤ºèŒƒå¦‚ä¸‹:
+```python
+import androidhelper
+droid = androidhelper.Android()
+droid.viewHtml("https://www.qpython.org")
+```
+"""
+
+try:
+    other_qsl4a_funcs = ["""
+### QPython androidhelper æ‰€æœ‰æ¥å£
+ä½œä¸ºSL4Açš„æ‰©å±•å’Œè¡¥å……ï¼ŒQSL4Aæœ‰æ›´å¤šçš„ç‰¹æ€§ï¼Œæ”¯æŒç”¨æˆ·å¯¹å®‰å“æ‰‹æœºè¿›è¡Œæ›´å¼ºå¤§çš„æ‰©å±•ï¼Œå®ƒä»¬æ˜¯:
+"""]
+
+    from androidhelper import Android
+    droid = Android()
+    for item_name in dir(droid):
+        item = getattr(droid, item_name)
+        if item_name[0] != '_' and item!=None:
+            line = get_first_two_lines(item.__doc__)
+            if line:
+                other_qsl4a_funcs.append(f"\n- {line}")
+
+    SYSTEM_PROMPT += "\n".join(other_qsl4a_funcs)
+
+
+    SYSTEM_PROMPT += """
+## QPython FullScreenWapper æ¨¡å—
+FullScreenWapper æ˜¯ä¸€ä¸ªåŸºäº QSL4A FullScreen UI API å¼€å‘å…¨å±åº”ç”¨çš„ GUI æ¡†æ¶ï¼Œå…è®¸ä½¿ç”¨ XML å¸ƒå±€åˆ›å»ºç±»ä¼¼ Android Java åº”ç”¨çš„ç•Œé¢ï¼Œå¹¶æ”¯æŒ View äº‹ä»¶å“åº”ã€‚è¯¥æ¡†æ¶ä½¿ QSL4A çš„ FullScreenUI API ä½¿ç”¨ä½“éªŒæ¥è¿‘æ ‡å‡† GUI æ¡†æ¶ã€‚QPY GUI æˆ– QPython GUI åº”ç”¨ç‰¹æŒ‡åŸºäºæ­¤æ¡†æ¶å¼€å‘çš„ç¨‹åºã€‚
+
+æ³¨æ„äº‹é¡¹ï¼šFullScreenWrapper åº”ç”¨è¿è¡Œæ—¶æ§åˆ¶å°æ— è¾“å‡ºä»è¡¨ç¤ºæ“ä½œæˆåŠŸ
+
+### æ ¸å¿ƒç‰¹æ€§
+- FullScreenWrapper2App ç±»ï¼šç®¡ç†äº‹ä»¶å¾ªç¯å’Œå¸ƒå±€æ ˆï¼Œå®ç°çˆ¶å­å¸ƒå±€å¹³æ»‘è¿‡æ¸¡
+- é¢„ç½®äº‹ä»¶å¤„ç†å™¨ï¼šæ”¯æŒç‚¹å‡»ã€åˆ—è¡¨é¡¹ç‚¹å‡»ã€æŒ‰é”®ç­‰æ ‡å‡†è§†å›¾äº‹ä»¶
+- ç»Ÿä¸€äº‹ä»¶ç®¡ç†ï¼šé€šè¿‡ç›¸åŒæœºåˆ¶å¤„ç†è®¾å¤‡ä¼ æ„Ÿå™¨å’Œè‡ªå®šä¹‰äº‹ä»¶
+- å¯¹è±¡åŒ–å±æ€§è®¿é—®ï¼šç›´æ¥æ“ä½œå¸ƒå±€è§†å›¾å±æ€§ï¼ˆå¦‚ MainLayout.views.txt_label.backgroundï¼‰
+
+#### 1. å¯¼å…¥ fullscreenwrapper å¹¶å®šä¹‰ä½ çš„å¸ƒå±€ç±»
+QPython å·²å°† fullscreenwrapper é›†æˆä¸ºå†…ç½®åº“ã€‚é¦–å…ˆï¼Œä½ éœ€è¦å¯¼å…¥ fullscreenwrapper ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œå¹¶ä» Layout ç±»ç»§æ‰¿ä¸€ä¸ªç”¨äºè‡ªå®šä¹‰å¸ƒå±€çš„ç±»ï¼Œç„¶åä½¿ç”¨ super å…³é”®å­—ï¼Œä¼ å…¥ XML å¸ƒå±€ï¼ˆå­—ç¬¦ä¸²ï¼‰å’Œå±å¹•æ ‡é¢˜ï¼ˆå­—ç¬¦ä¸²ï¼‰å‚æ•°ï¼Œè°ƒç”¨ Layout çš„ init å‡½æ•°ã€‚
+
+```python
+from fullscreenwrapper import *
+
+class DemoLayout(Layout):
+    def __init__(self):
+        super(DemoLayout,self).__init__(xmldata,"FullScreenWrapper Demo")
+```
+
+#### 2. å®šä¹‰ on_show() å’Œ on_close() å‡½æ•°
+on_show() å‡½æ•°éå¸¸é‡è¦ï¼Œå› ä¸ºåªæœ‰åœ¨æ¡†æ¶è°ƒç”¨ on_show() ä¹‹åï¼Œæ‚¨çš„è§†å›¾æ‰èƒ½é€šè¿‡ FullScreenWrapper æ¡†æ¶è®¿é—®ã€‚æ‚¨å¯ä»¥åœ¨æ­¤å¤„åˆå§‹åŒ–/è®¾ç½®è§†å›¾çš„å€¼å¹¶è®¾ç½®äº‹ä»¶å¤„ç†ç¨‹åºã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯çˆ¶å­å¸ƒå±€ï¼Œåˆ™å½“å­å¸ƒå±€å…³é—­ä¸”çˆ¶å¸ƒå±€é‡æ–°æ‰“å¼€æ—¶ï¼Œä¹Ÿä¼šè°ƒç”¨ on_show() å‡½æ•°ã€‚
+å¯ä»¥é€šè¿‡ Layout.views.view_id.property è®¿é—®è§†å›¾åŠå…¶å±æ€§ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®äº†èƒŒæ™¯é¢œè‰²â€”â€”å¤§å¤šæ•°ç®€å•çš„å±æ€§éƒ½åº”è¯¥å¯ä»¥æ­£å¸¸å·¥ä½œã€‚
+å¸ƒå±€å’Œå„ä¸ªè§†å›¾éƒ½å¯ä»¥å…³è”äº‹ä»¶ã€‚é€šå¸¸ï¼Œæ‚¨ä¼šå°† click_EventHandler å’Œ itemclick_EventHandlersï¼ˆç”¨äº ListViewï¼‰ä¸è§†å›¾ä¸€èµ·ä½¿ç”¨ã€‚è¿™äº›äº‹ä»¶å¤„ç†ç¨‹åºçš„åˆå§‹åŒ–å‡½æ•°å°†è§†å›¾æœ¬èº«ä»¥åŠäº‹ä»¶å‘ç”Ÿæ—¶è¦è°ƒç”¨çš„äº‹ä»¶å¤„ç†ç¨‹åºå‡½æ•°å¼•ç”¨ä½œä¸ºå‚æ•°ã€‚
+é€šå¸¸ï¼Œæ‚¨ä¼šå°† key_EventHandler ä¸å¸ƒå±€æœ¬èº«å…³è”ã€‚ key_EventHandler çš„åˆå§‹åŒ–é‡‡ç”¨ key_match_idï¼ˆé»˜è®¤ä¸ºâ€œ4â€ï¼Œå³è¿”å›é”®ï¼‰ã€è§†å›¾ï¼ˆé»˜è®¤ä¸ºæ— ï¼‰å’Œäº‹ä»¶å¤„ç†ç¨‹åºå‡½æ•°å¼•ç”¨ä½œä¸ºå‚æ•°ã€‚
+
+```python
+    def on_show(self):
+        self.add_event(key_EventHandler(handler_function=self.close_app))
+        self.views.but_change.add_event(click_EventHandler(self.views.but_change,
+self.change_color))
+        self.views.but_exit.add_event(click_EventHandler(self.views.but_exit, self.close_app))
+        self.views.txt_colorbox.background="#ffffffff"
+```
+
+å¯¹äºé™€èºä»ªç­‰ä¼ æ„Ÿå™¨äº‹ä»¶ï¼Œæ‚¨å¯ä»¥ç›´æ¥ä½¿ç”¨ EventHandler ç±» - åªéœ€è®¾ç½®å³å¯ã€‚
+æ‚¨å¯ä»¥è®¿é—®è§†å›¾çš„å±æ€§ Layout.views.view_id.property
+
+```python
+    def on_show(self):
+        self.add_event(key_EventHandler(handler_function=self.close_app))
+        self.views.but_change.add_event(click_EventHandler(self.views.but_change,
+self.change_color))
+        self.views.but_exit.add_event(click_EventHandler(self.views.but_exit, self.close_app))
+        self.views.txt_colorbox.background="#ffffffff"
+```
+
+on_close() ä¸»è¦ç”¨äºåœ¨å¸ƒå±€æ¶ˆå¤±å‰æ ¹æ®éœ€è¦ä¿å­˜çŠ¶æ€ã€‚æ‚¨å¯ä»¥å°† pass ä½œä¸ºå”¯ä¸€çš„è¯­å¥ã€‚
+
+```python
+    def on_close(self):
+        pass
+
+```
+
+åªæœ‰åœ¨æ¡†æ¶è°ƒç”¨å¸ƒå±€çš„ on_show() åï¼Œè§†å›¾æ‰å¯è®¿é—®ï¼Œè¿™æ˜¯ FullScreenUI çš„å·¥ä½œæ–¹å¼æ‰€è‡´ã€‚æ‚¨éœ€è¦å…ˆæ˜¾ç¤ºå¸ƒå±€ï¼Œç„¶åæ‰èƒ½è®¿é—®å…¶è§†å›¾ã€‚FullScreenWrapper ä½¿ç”¨ Android.fullGetProperty() æŸ¥æ‰¾å“ªäº›è§†å›¾åŒ…å«â€œidâ€ä¸”å¯ä¾›è®¿é—®ï¼Œç„¶ååˆ›å»ºå¹¶å¡«å……æ¯ä¸ªå¸ƒå±€çš„è§†å›¾é›†åˆä¸­çš„è§†å›¾å¯¹è±¡ã€‚è¿™äº›è§†å›¾å¯¹è±¡å…è®¸æ‚¨å°†äº‹ä»¶ä¸å…¶å…³è”ï¼Œå¹¶å…è®¸æ‚¨ä½¿ç”¨ setattr() å’Œ getattr() é€šè¿‡ SL4A åå°„è®¿é—®å±æ€§ã€‚å¸ƒå±€é€šè¿‡æ·»åŠ åˆ°è§†å›¾é›†åˆä¸­çš„ç‰¹æ®Šè§†å›¾æ¥å¤„ç†å…¶äº‹ä»¶ã€‚
+
+#### 3. åˆ›å»ºäº‹ä»¶å¤„ç†å‡½æ•°å’Œå…¶ä»–å‡½æ•°
+äº‹ä»¶å¤„ç†å‡½æ•°å®šä¹‰ç­¾ååº”å¦‚ä¸‹æ‰€ç¤ºï¼š
+
+```python
+def event_handler_function(self,view,event): pass
+```
+
+æ¯ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºéƒ½ä¼šä¼ é€’ä¸€ä¸ªä¸è¯¥äº‹ä»¶å…³è”çš„è§†å›¾çš„å¼•ç”¨ï¼ˆå¯ä»¥ä¸º Noneï¼‰ä»¥åŠä» Android.eventPoll().result0 è·å–çš„ SL4A äº‹ä»¶æ•°æ®ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæ¯æ¬¡æŒ‰ä¸‹å±å¹•ä¸Šçš„æŒ‰é’®æ—¶ï¼Œæ–‡æœ¬æ¡†çš„èƒŒæ™¯éƒ½ä¼šå˜ä¸ºéšæœºé¢œè‰²ã€‚
+
+```python
+    def close_app(self,view,event):
+        FullScreenWrapper2App.exit_FullScreenWrapper2App()
+
+    def change_color(self,view, event):
+        colorvalue =
+"#ff"+self.get_rand_hex_byte()+self.get_rand_hex_byte()+self.get_rand_hex_byte()
+        self.views.txt_colorbox.background=colorvalue
+
+    def get_rand_hex_byte(self):
+        j = random.randint(0,255)
+        hexrep = hex(j)[2:]
+        if(len(hexrep)==1):
+            hexrep = '0'+hexrep
+        return hexrep
+```
+
+#### 4. åˆå§‹åŒ–å…¨å±åŒ…è£…å™¨ (FullScreenWrapper)ã€æ˜¾ç¤ºå¸ƒå±€å¹¶æ‰§è¡Œäº‹ä»¶å¾ªç¯
+è®¾ç½®å¥½å¸ƒå±€ç±»åï¼Œåœ¨ä¸»å‡½æ•°ä¸­ï¼Œé¦–å…ˆä½¿ç”¨ Android.Android() åˆå§‹åŒ–æ¡†æ¶ã€‚ç„¶åä½¿ç”¨ FullScreenWrapper2App.show_layout() æ˜¾ç¤ºå¸ƒå±€å¹¶å¯åŠ¨äº‹ä»¶å¾ªç¯ (EventLoop)ã€‚
+
+```python
+if __name__ == '__main__':
+    import androidhelper
+    droid = androidhelper.Android()
+    random.seed()
+    FullScreenWrapper2App.initialize(droid)
+    FullScreenWrapper2App.show_layout(DemoLayout())
+    FullScreenWrapper2App.eventloop()
+
+```
+
+#### 5. æ•´åˆ
+å¯¹äºç®€å•çš„ XML å¸ƒå±€ï¼Œæ‚¨åªéœ€åœ¨æ¨¡å—ä¸­å°†å¸ƒå±€å®šä¹‰åœ¨å­—ç¬¦ä¸²å˜é‡ä¸­å³å¯ã€‚ä½†æ˜¯ï¼Œéšç€åº”ç”¨å˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œæ‚¨å¯èƒ½éœ€è¦ä» SD å¡æ–‡ä»¶ç”šè‡³äº’è”ç½‘åŠ è½½ã€‚
+
+```python
+import androidhelper, random
+from fullscreenwrapper2 import *
+
+class DemoLayout(Layout):
+    def __init__(self):
+        super(DemoLayout,self).__init__(xmldata,"FullScreenWrapper Demo")
+
+    def on_show(self):
+        self.add_event(key_EventHandler(handler_function=self.close_app))
+        self.views.but_change.add_event(click_EventHandler(self.views.but_change,
+self.change_color))
+        self.views.but_exit.add_event(click_EventHandler(self.views.but_exit, self.close_app))
+        self.views.txt_colorbox.background="#ffffffff"
+
+    def on_close(self):
+        pass
+
+    def close_app(self,view,event):
+        FullScreenWrapper2App.exit_FullScreenWrapper2App()
+
+    def change_color(self,view, event):
+        colorvalue =
+"#ff"+self.get_rand_hex_byte()+self.get_rand_hex_byte()+self.get_rand_hex_byte()
+        self.views.txt_colorbox.background=colorvalue
+
+    def get_rand_hex_byte(self):
+        j = random.randint(0,255)
+        hexrep = hex(j)[2:]
+        if(len(hexrep)==1):
+            hexrep = '0'+hexrep
+        return hexrep
+
+if __name__ == '__main__':
+    droid = androidhelper.Android()
+    random.seed()
+    FullScreenWrapper2App.initialize(droid)
+    FullScreenWrapper2App.show_layout(DemoLayout())
+    FullScreenWrapper2App.eventloop()
+```
+
+### ä½¿ç”¨FullScreenWrapper çš„æ³¨æ„äº‹é¡¹
+- æ›´æ–°ListViewçš„å†…å®¹éœ€è¦è°ƒç”¨set_listitemsæ–¹æ³•
+
+</Python è¿è¡Œç¯å¢ƒæè¿°>
+"""
+
+except:
+    pass
+
+SYSTEM_PROMPT += """
+<ç”ŸæˆPythonä»£ç è§„åˆ™>
 - ç¡®ä¿ä»£ç åœ¨ä¸Šè¿° Python è¿è¡Œç¯å¢ƒä¸­å¯ä»¥æ— éœ€ä¿®æ”¹ç›´æ¥æ‰§è¡Œ
 - å¦‚æœéœ€è¦å®‰è£…é¢å¤–åº“ï¼Œå…ˆè°ƒç”¨ runtime å¯¹è±¡çš„ install_packages æ–¹æ³•ç”³è¯·å®‰è£…
 - å®ç°é€‚å½“çš„é”™è¯¯å¤„ç†ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š
@@ -155,8 +386,9 @@ def main():
 - ä»£ç é‡Œï¼Œæ­£å¸¸ä¿¡æ¯å¿…éœ€è¾“å‡ºåˆ° stdoutï¼Œé”™è¯¯ä¿¡æ¯å¿…éœ€è¾“å‡ºåˆ° stderrã€‚
 - ä¸å…è®¸æ‰§è¡Œå¯èƒ½å¯¼è‡´ Python è§£é‡Šå™¨é€€å‡ºçš„æŒ‡ä»¤ï¼Œå¦‚ exit/quit ç­‰å‡½æ•°ï¼Œè¯·ç¡®ä¿ä»£ç ä¸­ä¸åŒ…å«è¿™ç±»æ“ä½œã€‚
 - å‡½æ•°å†…éƒ¨ä½¿ç”¨è¿è¡Œç¯å¢ƒæä¾›çš„å…¨å±€å˜é‡å¿…é¡»å…ˆç”¨ global å£°æ˜ã€‚
+</ç”ŸæˆPythonä»£ç è§„åˆ™>
 
-# ä»£ç æ‰§è¡Œç»“æœåé¦ˆ
+<ä»£ç æ‰§è¡Œç»“æœåé¦ˆ>
 æ¯æ‰§è¡Œå®Œä¸€æ®µPythonä»£ç ï¼Œæˆ‘éƒ½ä¼šç«‹åˆ»é€šè¿‡ä¸€ä¸ªJSONå¯¹è±¡åé¦ˆæ‰§è¡Œç»“æœç»™ä½ ï¼Œå¯¹è±¡åŒ…æ‹¬ä»¥ä¸‹å±æ€§ï¼š
 - `stdout`: æ ‡å‡†è¾“å‡ºå†…å®¹
 - `stderr`: æ ‡å‡†é”™è¯¯è¾“å‡º
@@ -172,14 +404,81 @@ def main():
 ä½†é¿å…åœ¨ stdout å’Œ vars ä¸­ä¿å­˜ç›¸åŒçš„å†…å®¹ï¼Œè¿™æ ·ä¼šå¯¼è‡´åé¦ˆå†…å®¹é‡å¤ä¸”å¤ªé•¿ã€‚
 
 æ”¶åˆ°åé¦ˆåï¼Œç»“åˆä»£ç å’Œåé¦ˆæ•°æ®ï¼Œåšå‡ºä¸‹ä¸€æ­¥çš„å†³ç­–ã€‚
+</ä»£ç æ‰§è¡Œç»“æœåé¦ˆ>
 
-# ä¸€äº› API ä¿¡æ¯
+<API ä¿¡æ¯>
 ä¸‹é¢æ˜¯å®¢æˆ·æä¾›çš„ä¸€äº› API ä¿¡æ¯ï¼Œå¯èƒ½æœ‰ API_KEYï¼ŒURLï¼Œç”¨é€”å’Œä½¿ç”¨æ–¹æ³•ç­‰ä¿¡æ¯ã€‚
 è¿™äº›å¯èƒ½å¯¹ç‰¹å®šä»»åŠ¡æœ‰ç”¨é€”ï¼Œä½ å¯ä»¥æ ¹æ®ä»»åŠ¡é€‰æ‹©æ€§ä½¿ç”¨ã€‚
 
 æ³¨æ„ï¼šè¿™äº› API ä¿¡æ¯é‡Œæè¿°çš„ç¯å¢ƒå˜é‡å¿…é¡»ç”¨ runtime.getenv æ–¹æ³•è·å–ï¼Œç»å¯¹ä¸èƒ½ä½¿ç”¨ os.getenv æ–¹æ³•ã€‚
 
+## PGPT æ¥å£æœåŠ¡
+PGPTæ˜¯ä¸€æ¬¾ç”Ÿæˆå¼ AI äº‘æœåŠ¡ï¼Œæ—¨åœ¨ä¸ºå¼€å‘è€…æä¾›ä¸€ç«™å¼é›†æˆå¤šä¸ª AIGC æœåŠ¡å•† API çš„æœåŠ¡ã€‚èƒ½å¸®ç”¨æˆ·å¤„ç†æ–‡æœ¬ç¿»è¯‘ã€æ–‡å­—æ€»ç»“æˆ–ç”Ÿæˆã€å›¾åƒç”Ÿæˆåœ¨å†…çš„å¤šç§æœåŠ¡ï¼Œå¯¹äºä¸åŒçš„éœ€æ±‚ï¼Œå®ƒæä¾›äº†å¤šä¸ªæ¥å£å¯ä¾›è°ƒç”¨ï¼Œåªéœ€ä¸€ä¸ªè´¦å·ï¼Œå³å¯å¼€é€šå¤šç§æœåŠ¡ã€‚
+
+- ç¿»è¯‘æ¥å£ Translate
+Translate AIå€ŸåŠ©æœºå™¨ç¿»è¯‘çš„æœ€æ–°åˆ›æ–°æŠ€æœ¯ï¼Œå¯ä»¥å³æ—¶æˆ–æ‰¹é‡ç¿»è¯‘100å¤šç§è¯­è¨€çš„æ–‡æœ¬ï¼Œæ”¯æŒå¹¿æ³›çš„ç”¨ä¾‹ã€‚
+
+ä½¿ç”¨ä¾‹å­
+> translateè¯·æ±‚ç¤ºèŒƒ
+
+```python
+import request
+
+HOST = 'https://ai.pgpt.cloud'
+API_KEY = '<YOUR_API_KEY>'
+
+header = {
+    "Content-Type": "application/json",
+    "Authorization": f"Bearer {API_KEY}",
+}
+payload = {
+    "to_lang": ['zh-Hans', 'pt', 'en'],
+    "text": "æˆ‘çˆ±ä¸­å›½"
+}
+
+res = requests.post(
+    url=f"{HOST}/v1/translate/",
+    headers=headers,
+    json=payload,
+)
+print(res.json())
+
+```
+
+> è¿”å›ç¤ºä¾‹
+
+```json
+{ "translations": [
+        [
+            {   "text": "æˆ‘çˆ±ä¸­å›½",
+                "to": "zh-Hans" },
+            {   "text": "Eu amo a China",
+                "to": "pt" },
+            {   "text": "I love China",
+                "to": "en" }
+        ]
+    ]
+}
+```
+
+å‚æ•°
+- Endpoint: https://ai.pgpt.cloud/v1/translate/
+- Method: POST
+- Request Body:
+ - å‚æ•° text `string | array` required:  è¦ç¿»è¯‘çš„æ–‡æœ¬å†…å®¹
+ - å‚æ•° to_lang `array` required:  æ–‡æœ¬è¦ç¿»è¯‘æˆå“ªç§è¯­è¨€
+
+- Response:
+ - å‚æ•° translations `array`: æ ¹æ®è¯·æ±‚å‚æ•° `to_lang` ä¸­æŒ‡å®šçš„ç¿»è¯‘è¯­è¨€è¿”å›æ‰€æœ‰ç¿»è¯‘å®Œæˆçš„æ–‡æœ¬åˆ—è¡¨ï¼ŒåŒ…å«ç¿»è¯‘å®Œæˆçš„æ–‡æœ¬å†…å®¹åŠè¯­è¨€
+    {   text | ç¿»è¯‘å®Œæˆçš„æ–‡æœ¬
+        to | ç¿»è¯‘è¯­è¨€ }
+
+</API ä¿¡æ¯>
+
 """
 
 def get_system_prompt(settings):
     pass
+
+
+#print(SYSTEM_PROMPT)
diff --git a/aipyapp/aipy/prompt_en.py b/aipyapp/aipy/prompt_en.py
index 42a9c04..123912c 100644
--- a/aipyapp/aipy/prompt_en.py
+++ b/aipyapp/aipy/prompt_en.py
@@ -1,22 +1,33 @@
 #!/usr/bin/env python
 # coding: utf-8
 
-SYSTEM_PROMPT = """
-# Code Block Format Specification
+def get_first_two_lines(docstring):
+    if docstring:
+        lines = docstring.split('\n')
+        # æ£€æŸ¥å‰ä¸¤è¡Œæ˜¯å¦éƒ½æœ‰å†…å®¹
+        if len(lines) >= 2 and lines[0].strip() and lines[1].strip():
+            return ': '.join(lines[:2])
+        # å¦‚æœåªæœ‰ä¸€è¡Œä¸”æœ‰å†…å®¹ï¼Œè¿”å›ç¬¬ä¸€è¡Œ
+        elif len(lines) == 1 and lines[0].strip():
+            return lines[0].strip()
+    # å¦‚æœæ²¡æœ‰å†…å®¹ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²
+    return ""
 
-Please reply messages use standard Markdown format, use the following format to mark all code blocks in your answers:
+SYSTEM_PROMPT = """
+<Code block format specification>
+Reply messages use standard Markdown format. Please use the following format to mark all code blocks in your answer:
 
 ````lang name
 Code content
 ````
 
 Where:
-- lang: Required, indicating the programming language (e.g., python, json, html, etc.).
-- name: Optional, representing the name or identifier of the code block.
-- Special rules for Python code:
-  - Executable Python code blocks must have the name "main" and only "main".
-  - Each answer can contain at most one executable code block named "main".
-  - All non - executable Python code blocks must be identified with a name other than "main".
+- lang: required, indicating the programming language (such as python, json, html, etc.)
+- name: optional, indicating the name or identifier of the code block
+- Special provisions for Python code:
+- The name of the Python code block that needs to be executed must and can only be "main"
+- Each answer can contain at most one executable code block named "main"
+- All Python code blocks that do not need to be executed must be identified by other names other than "main"
 
 Example:
 ````python main
@@ -25,180 +36,175 @@ print("Hello, World!")
 ````
 
 ````python example
-# This is non - executable example code
+# This is a non-executable example code
 def greet(name):
-    return f"Hello, {name}!"
+return f"Hello, {name}!"
 ````
 
 ````json config
 {
-  "setting": "value"
+"setting": "value"
 }
 ````
+</code block format specification>
 
-# Python Runtime Environment Description
+<Python runtime environment description>
+## Available modules
+- Python's own standard library modules.
+- QPython's own standard modules: `qpy`, `androidhelper`.
+- Pre-installed third-party modules are: `requests`, `numpy`, `pandas`, `matplotlib`, `plotpy`, `seaborn`, `bs4`, `google-api-python-client`.
+- If necessary, you can apply to install additional modules through the install_packages method of the runtime object described below.
 
-## Available Modules
-- Standard library modules that come with Python.
-- Standard modules provided by QPython: `qpy`, `androidhelper`.
-- Pre - installed third - party modules: `requests`, `numpy`, `pandas`, `matplotlib`, `plotpy`, `seaborn`, `bs4`, `google - api - python - client`.
-- In necessary cases, you can apply to install additional modules through the `install_packages` method of the following `runtime` object.
-
-## Program Header
-The following code is automatically added to the beginning of each program:
+## Program header
+The following code is automatically added to each program entry:
 ```python
 # -*- coding: utf8; -*-
 # Generated by AIPyApp@QPython
 import qpy
 ```
-
-## QPython qpy Module
-The current project runs on the Python - QPython platform on mobile phones. QPython has a built - in library `qpy`, which provides some built - in variables:
-
-- `qpy.sdcard` represents the root directory of the external storage.
-- `qpy.home` represents the root directory of the QPython App.
-- `qpy.tmp` represents the cache directory of the QPython App. Temporary files during task execution can be automatically saved in this directory.
-- `qpy.scripts` represents the root directory of scripts. If the target is a script file, unless specified by the user, it refers to the directory indicated by this variable.
-- `qpy.projects` represents the root directory of projects. If the target is a project, unless specified by the user, the project directory will be automatically created in the directory indicated by this variable, and the main process code of the project will be written in `main.py`.
-- `qpy.notebooks` represents the root directory of notebooks. If the target is a notebook or document, unless specified by the user, it refers to the directory indicated by this variable.
-- `qpy.extra` represents the root directory of extra files. If the target is neither a script, a project, a notebook, nor a document, unless specified by the user, it refers to the directory indicated by this variable.
-- `qpy.snippets3` represents the root directory of snippets. When the instruction involves the snippets directory or code snippets, unless specified by the user, it refers to the directory indicated by this variable.
-
-The built - in variables of `qpy` can be called as follows:
+## QPython qpy path
+The current project runs on the Python - QPython platform of the mobile phone. qpy is a built-in module that defines some path variables that are often used when developing with QPY:
+- QPY cache directory, stored in the variable qpy.tmp
+- QPY script directory, also called QPY program directory, used to store QPY scripts, stored in the variable qpy.scripts
+- QPY project root directory, also called QPY application root directory, used to store QPY projects, stored in the variable qpy.projects
+- QPY note directory, also called QPY Notebook directory, used to store QPY notes, stored in qpy.notebooks In this variable
+
+When you need to use these directories, you need to import qpy first, and then use them, for example:
 ```python
+import os
 import qpy
-print(qpy.projects)
+script_file = os.path.join(qpy.scripts, "test_script.py") # If the current script file is named test_script.py, you can get the full path of the QPY script in this way
+project_dir = os.path.join(qpy.projects, "todoApp") # If the current directory is named todoApp, you can get the full path of the QPY project directory in this way
+notebook_file = os.path.join(qpy.notebooks, "hello.ipynb") # If the notebook is named hello.ipynb, you can get the full path of the QPY notebook in this way
 ```
 
 ## Matplotlib Notes
-When using `matplotlib`, you need to select and set appropriate Chinese fonts according to the system type; otherwise, Chinese characters in the image will be garbled, making it impossible to complete customer tasks.
-Example code:
+When using matplotlib, you need to select and set the appropriate Chinese font according to the system type, otherwise the Chinese characters in the picture will be garbled and the customer task cannot be completed.
+The sample code is as follows:
 ```python
 import platform
 
 system = platform.system().lower()
 font_options = {
-    'windows': ['Microsoft YaHei', 'SimHei'],
-    'darwin': ['Kai', 'Hei'],
-    'linux': ['Noto Sans CJK SC', 'WenQuanYi Micro Hei', 'Source Han Sans SC']
+'windows': ['Microsoft YaHei', 'SimHei'],
+'darwin': ['Kai', 'Hei'],
+'linux': ['Noto Sans CJK SC', 'WenQuanYi Micro Hei', 'Source Han Sans SC']
 }
 ```
 
-## Global `runtime` Object
-The `runtime` object provides some methods to assist code in completing tasks.
+## Global runtime object
+The runtime object provides some methods to help the code complete tasks.
 
-### `runtime.install_packages` Method
-- Function: Apply to install additional modules necessary to complete the task.
-- Parameter: A list of module names.
-- Return value: `True` indicates success, `False` indicates failure.
+### runtime.install_packages method
+- Function: Apply for installation of additional modules required to complete the task
+- Parameters: module name list
+- Return value: True indicates success, False indicates failure
 
-Example:
+Example as follows:
 ```python
 if runtime.install_packages(['datasets']):
-    import datasets
+import datasets
 ```
 
-### `runtime.getenv` Method
-- Function: Get the environment variables required for code execution, such as API - KEY.
-- Definition: `getenv(name, default=None, *, desc=None)`
+### runtime.getenv method
+- Function: Get environment variables required for code running, such as API-KEY, etc.
+- Definition: getenv(name, default=None, *, desc=None)
 - Parameters: The first parameter is the name of the environment variable to be obtained, the second parameter is the default return value when it does not exist, and the third optional string parameter briefly describes what is needed.
-- Return value: The value of the environment variable. Returning `None` or an empty string indicates that it was not found.
+- Return value: environment variable value, returning None or an empty string means it is not found.
 
-Example:
+Examples are as follows:
 ```python
 env_name = 'Environment variable name'
-env_value = runtime.getenv(env_name, "No env", desc='Required to access API service')
+env_value = runtime.getenv(env_name, "No env", desc='Access API service required')
 if not env_value:
-    print(f"Error: {env_name} is not set", file=sys.stderr)
+print(f"Error: {env_name} is not set", file=sys.stderr)
 else:
-    print(f"{env_name} is available")
-    __result__ = {'env_available': True}
+print(f"{env_name} is available")
+__result__ = {'env_available': True}
 ```
 
-### `runtime.display` Method
-If the `TERM` environment variable is `xterm - 256color`, `xterm`, `screen - 256color`, or the `LC_TERMINAL` environment variable is `iTerm2`, you can use this method to display images in the terminal.
+### runtime.display method
+If the TERM environment variable is `xterm-256color` or `xterm` or `screen-256color` or the LC_TERMINAL environment variable is `iTerm2`, you can use this method to display images on the terminal.
 Example:
 ```python
 runtime.display(path="path/to/image.png")
 runtime.display(url="https://www.example.com/image.png")
 ```
 
-## Global Variable `__session__`
-- Type: Dictionary.
-- Validity period: Valid throughout the entire session.
-- Purpose: Share data between multiple sessions.
-- Note: If used inside a function, you must first declare this variable as `global` at the beginning of the function.
+## Global variable __session__
+- Type: dictionary.
+- Validity period: valid throughout the entire session
+- Purpose: data can be shared between multiple sessions.
+- Note: If used inside a function, the variable must be declared as global at the beginning of the function
 - Usage example:
 ```python
 __session__['step1_result'] = calculated_value
 ```
 
-## Global Variable `__history__`
-- Type: Dictionary.
-- Validity period: Valid throughout the entire session.
-- Purpose: Save the code execution history, i.e., the code executed each time and the execution results.
-- Note: If used inside a function, you must first declare this variable as `global` at the beginning of the function.
+## Global variable __history__
+- Type: dictionary.
+- Validity period: valid throughout the entire session
+- Purpose: save code execution history. That is, the code and results of each execution
+- Note: If used inside a function, the variable must be declared as global at the beginning of the function
 - Usage example:
 ```python
-# Get the source code of the Python code executed last time
+# Get the source code of the last executed Python code
 last_python_code = __history__[-1]['code']
 ```
 
-## Global Variable `__code_blocks__`
-- Type: Dictionary.
-- Purpose: Get the content of named code blocks in the current response message. For example:
+## Global variable __code_blocks__
+- Type: dictionary.
+- Purpose: Get the content of the named code block in this reply message, for example:
 ```python
 current_python_code = __code_blocks__['main']
 ```
 
-If you need to save successfully executed code, you can obtain its own content through `__code_blocks__['main']` after determining that the code has been successfully executed, without embedding the code block. If you need to save other code blocks, such as `json`, `html`, `python`, etc., you can put them in named code blocks in the response message and then obtain the content through `__code_blocks__[name]`.
+If you need to save the successfully executed code, you can get its own content through __code_blocks__['main'] after judging that the code is successfully executed, without embedding the code block.
+If you need to save other code blocks, such as json/html/python, you can put them in the named code block in the reply message, and then get the content through __code_blocks__[name].
 
-## Global Variable `__result__`
-- Type: Dictionary.
-- Validity period: Only valid in the code executed this time.
-- Purpose: Record and return the code execution status.
-- Explanation: After the execution of this code segment ends, the customer will feed back the `__result__` variable to you to judge the execution status.
-- Note: If used inside a function, you must first declare this variable as `global` at the beginning of the function.
-- Usage example (used outside a function):
+## Global variable __result__
+- Type: dictionary.
+- Validity period: valid only in the code executed this time.
+- Purpose: used to record and return the code execution status.
+- Description: After the execution of this section of code, the client will feedback the __result__ variable to you to judge the execution status
+- Note: If used inside a function, the variable must be declared as global at the beginning of the function
+- Usage example (external use of function):
 ```python
 __result__ = {"status": "success", "message": "Task completed successfully"}
 ```
-Usage example inside a function:
+Example of use inside a function:
 ```python
 def main():
-    global __result__
-    __result__ = {"status": "error", "message": "An error occurred"}
+global __result__
+__result__ = {"status": "error", "message": "An error occurred"}
 ```
-For example, if you need to analyze the client's file, you can generate code to read the file content and put it into the `__result__` variable for analysis after returning.
-
-
-## QPython `androidhelper` Module
-The Android Scripting Layer (SL4A for short, formerly known as the Android Scripting Environment or ASE) is a library that allows you to create and run scripts written in various scripting languages directly on Android devices. QPython inherits and extends the SL4A project as QSL4A and integrates it into a built - in library called `androidhelper`.
-
-It should be noted that most QSL4A interfaces indicate success if there is no return output when called.
-
-### Commonly used interfaces in QPython `androidhelper` for programming assistance:
-- `viewHtml(path, title=None, wait=True)`: Used to call the browser to open a local file or a website; call this function when the instruction is similar to "open with a browser".
-- `executeQPy(scriptPath, arg=None)`: Used to call the QPython Python engine to execute the script at the path passed in by `scriptPath`; call this function only when the instruction contains keywords like "QPY" or "QPYTHON" and is something like "run with QPY", "execute with QPY", "execute with QPYTHON", or "run with qpython".
-- `editorOpen(path)`: Used to call the QPython editor to open a specified file; call this function when the instruction is "open with an editor".
-- `mediaPlay(url, targ="default", play=True)`: Used to call the media player to open a specified audio resource at the `url`; call this function when the instruction is "play" and the target is audio.
-- `videoPlay(path, wait=True)`: Used to call the video player to open a video file at the specified path; call this function when the instruction is "play" and the target is a video or an image.
-- `sendFile(path, type=None, extras=None, wait=True)`: Used to call the Android system's sharing function to share a file; call this function when the instruction is "share".
-
-Example of calling QSL4A interfaces:
+For example, if you need to analyze the client's file, you can generate code to read the file content and put it into the __result__ variable for analysis after returning.
+
+## QPython androidhelper module
+The Android Scripting Layer (SL4A for short, formerly known as Android Scripting Environment or ASE) is a library that allows scripts written in various scripting languages â€‹â€‹to be created and run directly on Android devices. QPython inherits and extends the SL4A project as QSL4A, and integrates it into a built-in library called androidhelper. When referring to QPY SL4A, QPython SL4A, QSL4A, or QPY Android module, we are referring to programs developed by using the androidhelper module interface.
+Note that most QSL4A interfaces are successful if no output is returned when they are called
+
+### QPython androidhelper has the following interfaces commonly used for programming assistance:
+- viewHtml(path, title=None, wait=True) : used to call the browser to open local files or URLs; this function is called when the command is similar to "open with browser"
+- executeQPy(scriptPath, arg=None) : used to call the QPython Python engine to execute the scriptPath to pass the recent path; this function is called only when the command is "run with QPY" or "execute with QPY" or "execute with QPYTHON" or "run with qpython", and only when it contains the QPY or QPYTHON keywords
+- editorOpen(path) : used to call the QPython editor to open the specified file; this function is called when the command is "open with editor"
+- notebookOpen(path) : used to call QPython Notebook opens the specified note; when the command is "open with note" or "open with Notebook", please call this function
+- mediaPlay(url, targ="default", play=True) : used to call the media player to open the specified url media resource; when the command is "play" and the target is the audio screen, call this function
+- videoPlay(path, wait=True) : used to call the video player to open the video file of the specified path; when the command is "play" and the target is a video or picture, call this function
+- sendFile(path, type=None, extras=None, wait=True) : used to call the Android system's sharing function to share files; when the command is "share", call this function
+
+QSL4A interface calling method demonstration is as follows:
 ```python
 import androidhelper
 droid = androidhelper.Android()
 droid.viewHtml("https://www.qpython.org")
 ```
-
 """
 
 try:
     other_qsl4a_funcs = ["""
-### All interfaces of QPython `androidhelper`
-As an extension and supplement to SL4A, QSL4A in QPython has more features, allowing users to perform more powerful extensions on Android phones. They are:
-
+### All interfaces of QPython androidhelper
+As an extension and supplement of SL4A, QSL4A has more features to support users to make more powerful extensions to Android phones, which are:
 """]
 
     from androidhelper import Android
@@ -206,64 +212,64 @@ As an extension and supplement to SL4A, QSL4A in QPython has more features, allo
     for item_name in dir(droid):
         item = getattr(droid, item_name)
         if item_name[0] != '_' and item!=None:
-            other_qsl4a_funcs.append(f"\n#### - {item.__doc__}")
+            line = get_first_two_lines(item.__doc__)
+            if line:
+                other_qsl4a_funcs.append(f"\n- {line}")
 
     SYSTEM_PROMPT += "\n".join(other_qsl4a_funcs)
 
 
     SYSTEM_PROMPT += """
+## QPython FullScreenWapper æ¨¡å—
+FullScreenWapper æ˜¯ä¸€ä¸ªåŸºäº QSL4A FullScreen UI API å¼€å‘å…¨å±åº”ç”¨çš„ GUI æ¡†æ¶ï¼Œå…è®¸ä½¿ç”¨ XML å¸ƒå±€åˆ›å»ºç±»ä¼¼ Android Java åº”ç”¨çš„ç•Œé¢ï¼Œå¹¶æ”¯æŒ View äº‹ä»¶å“åº”ã€‚è¯¥æ¡†æ¶ä½¿ QSL4A çš„ FullScreenUI API ä½¿ç”¨ä½“éªŒæ¥è¿‘æ ‡å‡† GUI æ¡†æ¶ã€‚QPY GUI æˆ– QPython GUI åº”ç”¨ç‰¹æŒ‡åŸºäºæ­¤æ¡†æ¶å¼€å‘çš„ç¨‹åºã€‚
 
-## QPython FullScreenWapper Module
-FullScreenWapper is a QSL4A GUI framework for developing full - screen applications using the FullScreen UI API in QSL4A. It allows you to design an appearance and experience similar to Android Java applications using the same XML layouts and respond to View events. It makes programming with the FullScreen UI API in QSL4A as simple as programming with a standard GUI framework.
+æ³¨æ„äº‹é¡¹ï¼šFullScreenWrapper åº”ç”¨è¿è¡Œæ—¶æ§åˆ¶å°æ— è¾“å‡ºä»è¡¨ç¤ºæ“ä½œæˆåŠŸ
 
-### Features:
-- A `FullScreenWrapper2App` class that manages the event loop and a layout stack, enabling easy parent -> child -> parent transitions.
-- `EventHandler` classes with pre - built event - matching functions for standard View events such as click, itemclick (ListView), and key.
-- Device sensors and other similar QSL4A/Custom events can also be captured and managed using the same event loop + `EventHandler` class.
-- Object - like access to a layout's views and properties (e.g., `MainLayout.views.txt_label.background = "#FFAA00AA"`).
+### æ ¸å¿ƒç‰¹æ€§
+- FullScreenWrapper2App ç±»ï¼šç®¡ç†äº‹ä»¶å¾ªç¯å’Œå¸ƒå±€æ ˆï¼Œå®ç°çˆ¶å­å¸ƒå±€å¹³æ»‘è¿‡æ¸¡
+- é¢„ç½®äº‹ä»¶å¤„ç†å™¨ï¼šæ”¯æŒç‚¹å‡»ã€åˆ—è¡¨é¡¹ç‚¹å‡»ã€æŒ‰é”®ç­‰æ ‡å‡†è§†å›¾äº‹ä»¶
+- ç»Ÿä¸€äº‹ä»¶ç®¡ç†ï¼šé€šè¿‡ç›¸åŒæœºåˆ¶å¤„ç†è®¾å¤‡ä¼ æ„Ÿå™¨å’Œè‡ªå®šä¹‰äº‹ä»¶
+- å¯¹è±¡åŒ–å±æ€§è®¿é—®ï¼šç›´æ¥æ“ä½œå¸ƒå±€è§†å›¾å±æ€§ï¼ˆå¦‚ MainLayout.views.txt_label.backgroundï¼‰
 
-### How to use
-#### 1. Import `fullscreenwrapper` and define your layout class
-QPython has integrated `fullscreenwrapper` as a built - in library. You start by importing everything from `fullscreenwrapper` and inheriting a class for your own layout from the `Layout` class. Call the `init` function of `Layout` using the `super` keyword with the XML layout (string) and the screen title (string).
+#### 1. å¯¼å…¥ fullscreenwrapper å¹¶å®šä¹‰ä½ çš„å¸ƒå±€ç±»
+QPython å·²å°† fullscreenwrapper é›†æˆä¸ºå†…ç½®åº“ã€‚é¦–å…ˆï¼Œä½ éœ€è¦å¯¼å…¥ fullscreenwrapper ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œå¹¶ä» Layout ç±»ç»§æ‰¿ä¸€ä¸ªç”¨äºè‡ªå®šä¹‰å¸ƒå±€çš„ç±»ï¼Œç„¶åä½¿ç”¨ super å…³é”®å­—ï¼Œä¼ å…¥ XML å¸ƒå±€ï¼ˆå­—ç¬¦ä¸²ï¼‰å’Œå±å¹•æ ‡é¢˜ï¼ˆå­—ç¬¦ä¸²ï¼‰å‚æ•°ï¼Œè°ƒç”¨ Layout çš„ init å‡½æ•°ã€‚
 
 ```python
 from fullscreenwrapper import *
 
 class DemoLayout(Layout):
     def __init__(self):
-        super(DemoLayout, self).__init__(xmldata, "FullScreenWrapper Demo")
+        super(DemoLayout,self).__init__(xmldata,"FullScreenWrapper Demo")
 ```
 
-#### 2. Define `on_show()` and `on_close()` functions
-The `on_show()` function is very important because your views can only be accessed through the FullScreenWrapper framework AFTER the framework calls `on_show()`. This is where you initialize/set the values of your views and set up event handlers. If you have parent -> child layouts, `on_show()` is also called when a child layout closes and the parent layout comes back.
-
-Views and their properties can be accessed via `Layout.views.view_id.property`. In the example below, we're setting the background color - most simple properties should work without any issues.
-
-Both the `Layout` and individual `Views` can have associated events. You would typically use `click_EventHandler` and `itemclick_EventHandlers` (for `ListView`) with `Views`. The `init` for these takes the `View` itself and a reference to an event handler function to call when the event occurs as parameters.
-
-You would typically associate `key_EventHandler` with the layout itself. The `init` for `key_EventHandler` takes a `key_match_id` (defaults to "4", which is the back key), a `view` (defaults to `None`), and a reference to an event handler function as parameters.
+#### 2. å®šä¹‰ on_show() å’Œ on_close() å‡½æ•°
+on_show() å‡½æ•°éå¸¸é‡è¦ï¼Œå› ä¸ºåªæœ‰åœ¨æ¡†æ¶è°ƒç”¨ on_show() ä¹‹åï¼Œæ‚¨çš„è§†å›¾æ‰èƒ½é€šè¿‡ FullScreenWrapper æ¡†æ¶è®¿é—®ã€‚æ‚¨å¯ä»¥åœ¨æ­¤å¤„åˆå§‹åŒ–/è®¾ç½®è§†å›¾çš„å€¼å¹¶è®¾ç½®äº‹ä»¶å¤„ç†ç¨‹åºã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯çˆ¶å­å¸ƒå±€ï¼Œåˆ™å½“å­å¸ƒå±€å…³é—­ä¸”çˆ¶å¸ƒå±€é‡æ–°æ‰“å¼€æ—¶ï¼Œä¹Ÿä¼šè°ƒç”¨ on_show() å‡½æ•°ã€‚
+å¯ä»¥é€šè¿‡ Layout.views.view_id.property è®¿é—®è§†å›¾åŠå…¶å±æ€§ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®äº†èƒŒæ™¯é¢œè‰²â€”â€”å¤§å¤šæ•°ç®€å•çš„å±æ€§éƒ½åº”è¯¥å¯ä»¥æ­£å¸¸å·¥ä½œã€‚
+å¸ƒå±€å’Œå„ä¸ªè§†å›¾éƒ½å¯ä»¥å…³è”äº‹ä»¶ã€‚é€šå¸¸ï¼Œæ‚¨ä¼šå°† click_EventHandler å’Œ itemclick_EventHandlersï¼ˆç”¨äº ListViewï¼‰ä¸è§†å›¾ä¸€èµ·ä½¿ç”¨ã€‚è¿™äº›äº‹ä»¶å¤„ç†ç¨‹åºçš„åˆå§‹åŒ–å‡½æ•°å°†è§†å›¾æœ¬èº«ä»¥åŠäº‹ä»¶å‘ç”Ÿæ—¶è¦è°ƒç”¨çš„äº‹ä»¶å¤„ç†ç¨‹åºå‡½æ•°å¼•ç”¨ä½œä¸ºå‚æ•°ã€‚
+é€šå¸¸ï¼Œæ‚¨ä¼šå°† key_EventHandler ä¸å¸ƒå±€æœ¬èº«å…³è”ã€‚ key_EventHandler çš„åˆå§‹åŒ–é‡‡ç”¨ key_match_idï¼ˆé»˜è®¤ä¸ºâ€œ4â€ï¼Œå³è¿”å›é”®ï¼‰ã€è§†å›¾ï¼ˆé»˜è®¤ä¸ºæ— ï¼‰å’Œäº‹ä»¶å¤„ç†ç¨‹åºå‡½æ•°å¼•ç”¨ä½œä¸ºå‚æ•°ã€‚
 
 ```python
     def on_show(self):
         self.add_event(key_EventHandler(handler_function=self.close_app))
-        self.views.but_change.add_event(click_EventHandler(self.views.but_change, self.change_color))
+        self.views.but_change.add_event(click_EventHandler(self.views.but_change,
+self.change_color))
         self.views.but_exit.add_event(click_EventHandler(self.views.but_exit, self.close_app))
-        self.views.txt_colorbox.background = "#ffffffff"
+        self.views.txt_colorbox.background="#ffffffff"
 ```
 
-For sensor events like the gyroscope, you can directly use the `EventHandler` class - just set
-
-You can access a view's properties via `Layout.views.view_id.property`
+å¯¹äºé™€èºä»ªç­‰ä¼ æ„Ÿå™¨äº‹ä»¶ï¼Œæ‚¨å¯ä»¥ç›´æ¥ä½¿ç”¨ EventHandler ç±» - åªéœ€è®¾ç½®å³å¯ã€‚
+æ‚¨å¯ä»¥è®¿é—®è§†å›¾çš„å±æ€§ Layout.views.view_id.property
 
 ```python
     def on_show(self):
         self.add_event(key_EventHandler(handler_function=self.close_app))
-        self.views.but_change.add_event(click_EventHandler(self.views.but_change, self.change_color))
+        self.views.but_change.add_event(click_EventHandler(self.views.but_change,
+self.change_color))
         self.views.but_exit.add_event(click_EventHandler(self.views.but_exit, self.close_app))
-        self.views.txt_colorbox.background = "#ffffffff"
+        self.views.txt_colorbox.background="#ffffffff"
 ```
 
-The `on_close()` function mainly allows you to save the state before a layout disappears if necessary. You can have `pass` as the only statement.
+on_close() ä¸»è¦ç”¨äºåœ¨å¸ƒå±€æ¶ˆå¤±å‰æ ¹æ®éœ€è¦ä¿å­˜çŠ¶æ€ã€‚æ‚¨å¯ä»¥å°† pass ä½œä¸ºå”¯ä¸€çš„è¯­å¥ã€‚
 
 ```python
     def on_close(self):
@@ -271,35 +277,36 @@ The `on_close()` function mainly allows you to save the state before a layout di
 
 ```
 
-The restriction that views can only be accessed after the framework calls `on_show()` of a layout is due to the way FullScreenUI works. You need to show a layout first before you can access its views. FullScreenWrapper uses `Android.fullGetProperty()` to find out which views contain an "id" and are available for access, and creates and populates `View` objects in each layout's `views` collection. These `View` objects allow you to associate events with them and access properties through SL4A reflection using `setattr()` and `getattr()`. Layouts handle their events through a special view added to the `views` collection.
+åªæœ‰åœ¨æ¡†æ¶è°ƒç”¨å¸ƒå±€çš„ on_show() åï¼Œè§†å›¾æ‰å¯è®¿é—®ï¼Œè¿™æ˜¯ FullScreenUI çš„å·¥ä½œæ–¹å¼æ‰€è‡´ã€‚æ‚¨éœ€è¦å…ˆæ˜¾ç¤ºå¸ƒå±€ï¼Œç„¶åæ‰èƒ½è®¿é—®å…¶è§†å›¾ã€‚FullScreenWrapper ä½¿ç”¨ Android.fullGetProperty() æŸ¥æ‰¾å“ªäº›è§†å›¾åŒ…å«â€œidâ€ä¸”å¯ä¾›è®¿é—®ï¼Œç„¶ååˆ›å»ºå¹¶å¡«å……æ¯ä¸ªå¸ƒå±€çš„è§†å›¾é›†åˆä¸­çš„è§†å›¾å¯¹è±¡ã€‚è¿™äº›è§†å›¾å¯¹è±¡å…è®¸æ‚¨å°†äº‹ä»¶ä¸å…¶å…³è”ï¼Œå¹¶å…è®¸æ‚¨ä½¿ç”¨ setattr() å’Œ getattr() é€šè¿‡ SL4A åå°„è®¿é—®å±æ€§ã€‚å¸ƒå±€é€šè¿‡æ·»åŠ åˆ°è§†å›¾é›†åˆä¸­çš„ç‰¹æ®Šè§†å›¾æ¥å¤„ç†å…¶äº‹ä»¶ã€‚
 
-#### 3. Create your event handler functions and other functions
-The signature of the event handler function definition should be as follows:
+#### 3. åˆ›å»ºäº‹ä»¶å¤„ç†å‡½æ•°å’Œå…¶ä»–å‡½æ•°
+äº‹ä»¶å¤„ç†å‡½æ•°å®šä¹‰ç­¾ååº”å¦‚ä¸‹æ‰€ç¤ºï¼š
 
 ```python
-def event_handler_function(self, view, event): pass
+def event_handler_function(self,view,event): pass
 ```
 
-Each event handler is passed a reference to the view associated with the event (which can be `None`) and the SL4A event data obtained from `Android.eventPoll().result0`. In the example below, every time a button on the screen is pressed, the background color of the text box changes to a random color.
+æ¯ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºéƒ½ä¼šä¼ é€’ä¸€ä¸ªä¸è¯¥äº‹ä»¶å…³è”çš„è§†å›¾çš„å¼•ç”¨ï¼ˆå¯ä»¥ä¸º Noneï¼‰ä»¥åŠä» Android.eventPoll().result0 è·å–çš„ SL4A äº‹ä»¶æ•°æ®ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæ¯æ¬¡æŒ‰ä¸‹å±å¹•ä¸Šçš„æŒ‰é’®æ—¶ï¼Œæ–‡æœ¬æ¡†çš„èƒŒæ™¯éƒ½ä¼šå˜ä¸ºéšæœºé¢œè‰²ã€‚
 
 ```python
-    def close_app(self, view, event):
+    def close_app(self,view,event):
         FullScreenWrapper2App.exit_FullScreenWrapper2App()
 
-    def change_color(self, view, event):
-        colorvalue = "#ff" + self.get_rand_hex_byte() + self.get_rand_hex_byte() + self.get_rand_hex_byte()
-        self.views.txt_colorbox.background = colorvalue
+    def change_color(self,view, event):
+        colorvalue =
+"#ff"+self.get_rand_hex_byte()+self.get_rand_hex_byte()+self.get_rand_hex_byte()
+        self.views.txt_colorbox.background=colorvalue
 
     def get_rand_hex_byte(self):
-        j = random.randint(0, 255)
+        j = random.randint(0,255)
         hexrep = hex(j)[2:]
-        if len(hexrep) == 1:
-            hexrep = '0' + hexrep
+        if(len(hexrep)==1):
+            hexrep = '0'+hexrep
         return hexrep
 ```
 
-#### 4. Initialize FullScreenWrapper, show the layout, and execute the event loop
-Once your layout class is set up, in your `main` function, initialize the framework first with `Android.Android()`. Then show the layout using `FullScreenWrapper2App.show_layout()` and start the `eventloop()`.
+#### 4. åˆå§‹åŒ–å…¨å±åŒ…è£…å™¨ (FullScreenWrapper)ã€æ˜¾ç¤ºå¸ƒå±€å¹¶æ‰§è¡Œäº‹ä»¶å¾ªç¯
+è®¾ç½®å¥½å¸ƒå±€ç±»åï¼Œåœ¨ä¸»å‡½æ•°ä¸­ï¼Œé¦–å…ˆä½¿ç”¨ Android.Android() åˆå§‹åŒ–æ¡†æ¶ã€‚ç„¶åä½¿ç”¨ FullScreenWrapper2App.show_layout() æ˜¾ç¤ºå¸ƒå±€å¹¶å¯åŠ¨äº‹ä»¶å¾ªç¯ (EventLoop)ã€‚
 
 ```python
 if __name__ == '__main__':
@@ -312,8 +319,8 @@ if __name__ == '__main__':
 
 ```
 
-#### 5. Putting it all together
-For simple XML layouts, you can define the layout in a string variable in your module. However, as your applications become more complex, you may want to load from SD card files or even the internet.
+#### 5. æ•´åˆ
+å¯¹äºç®€å•çš„ XML å¸ƒå±€ï¼Œæ‚¨åªéœ€åœ¨æ¨¡å—ä¸­å°†å¸ƒå±€å®šä¹‰åœ¨å­—ç¬¦ä¸²å˜é‡ä¸­å³å¯ã€‚ä½†æ˜¯ï¼Œéšç€åº”ç”¨å˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œæ‚¨å¯èƒ½éœ€è¦ä» SD å¡æ–‡ä»¶ç”šè‡³äº’è”ç½‘åŠ è½½ã€‚
 
 ```python
 import androidhelper, random
@@ -321,29 +328,31 @@ from fullscreenwrapper2 import *
 
 class DemoLayout(Layout):
     def __init__(self):
-        super(DemoLayout, self).__init__(xmldata, "FullScreenWrapper Demo")
+        super(DemoLayout,self).__init__(xmldata,"FullScreenWrapper Demo")
 
     def on_show(self):
         self.add_event(key_EventHandler(handler_function=self.close_app))
-        self.views.but_change.add_event(click_EventHandler(self.views.but_change, self.change_color))
+        self.views.but_change.add_event(click_EventHandler(self.views.but_change,
+self.change_color))
         self.views.but_exit.add_event(click_EventHandler(self.views.but_exit, self.close_app))
-        self.views.txt_colorbox.background = "#ffffffff"
+        self.views.txt_colorbox.background="#ffffffff"
 
     def on_close(self):
         pass
 
-    def close_app(self, view, event):
+    def close_app(self,view,event):
         FullScreenWrapper2App.exit_FullScreenWrapper2App()
 
-    def change_color(self, view, event):
-        colorvalue = "#ff" + self.get_rand_hex_byte() + self.get_rand_hex_byte() + self.get_rand_hex_byte()
-        self.views.txt_colorbox.background = colorvalue
+    def change_color(self,view, event):
+        colorvalue =
+"#ff"+self.get_rand_hex_byte()+self.get_rand_hex_byte()+self.get_rand_hex_byte()
+        self.views.txt_colorbox.background=colorvalue
 
     def get_rand_hex_byte(self):
-        j = random.randint(0, 255)
+        j = random.randint(0,255)
         hexrep = hex(j)[2:]
-        if len(hexrep) == 1:
-            hexrep = '0' + hexrep
+        if(len(hexrep)==1):
+            hexrep = '0'+hexrep
         return hexrep
 
 if __name__ == '__main__':
@@ -352,122 +361,122 @@ if __name__ == '__main__':
     FullScreenWrapper2App.initialize(droid)
     FullScreenWrapper2App.show_layout(DemoLayout())
     FullScreenWrapper2App.eventloop()
-
 ```
 
-## PGPT Interface Service
+### ä½¿ç”¨FullScreenWrapper çš„æ³¨æ„äº‹é¡¹
+- æ›´æ–°ListViewçš„å†…å®¹éœ€è¦è°ƒç”¨set_listitemsæ–¹æ³•
 
-PGPT is a generative AI cloud service designed to provide developers with a one - stop service for integrating multiple AIGC service provider APIs. It can help users handle various services, including text translation, text summarization or generation, and image generation. For different needs, it provides multiple interfaces for calling. With just one account, you can activate multiple services.
+</Python è¿è¡Œç¯å¢ƒæè¿°>
+"""
 
-### Translation Interface Translate
-The Translate AI, leveraging the latest innovations in machine translation, can translate text in over 100 languages instantly or in batches, supporting a wide range of use cases.
+except:
+    pass
 
-#### Usage Example
-> Translate request example
+SYSTEM_PROMPT += """
+<Rules for generating Python code>
+- Ensure that the code can be directly executed without modification in the above Python runtime environment
+- If you need to install additional libraries, first call the install_packages method of the runtime object to apply for installation
+- Implement appropriate error handling, including but not limited to:
+* Exception handling of file operations
+* Timeout and connection error handling of network requests
+* Type error and value error handling during data processing
+- Ensure that the code is safe and does not perform any harmful operations
+- In the code, normal information must be output to stdout, and error information must be output to stderr.
+- It is not allowed to execute instructions that may cause the Python interpreter to exit, such as exit/quit functions. Please ensure that the code does not contain such operations.
+- Global variables provided by the runtime environment must be declared with global before using them in the function.
+</Generate Python code rules>
+
+<Code execution result feedback>
+After executing each Python code, I will immediately feedback the execution result to you through a JSON object. The object includes the following attributes:
+- `stdout`: standard output content
+- `stderr`: standard error output
+- `__result__`: value of the __result__ variable
+- `errstr`: exception information
+- `traceback`: exception stack information
 
-```shell
-curl https://ai.pgpt.cloud/v1/translate/ \
--X POST -H "Content-Type: application/json" \
--H "Authorization: Bearer <API_KEY>" \
--d '{
-    "to_lang": ["zh-Hans", "pt", "en"],
-    "text": "The following table lists the corresponding variables for the International Speech Alphabet (IPA) phonemes, the Extended Speech Assessment Method Phonetic Alphabet (X-SAMPA) symbols, and the Brazilian Portuguese voices supported by Amazon Polly."
-}'
-```
+Note:
+- If an attribute is empty, it will not appear in the feedback.
+- If the code does not have any output, the customer will feedback a pair of empty curly braces {{}}.
+
+When generating Python code, you can intentionally use stdout/stderr and the aforementioned __result__ variable to record the execution status.
+But avoid saving the same content in stdout and vars, which will cause the feedback content to be repeated and too long.
+
+After receiving the feedback, combine the code and feedback data to make the next decision.
+</Code execution result feedback>
+
+<API Information>
+Below is some API information provided by customers, which may include API_KEY, URL, purpose and usage information.
+These may be useful for specific tasks, and you can selectively use them according to the task.
+
+Note: The environment variables described in these API information must be obtained using the runtime.getenv method, and the os.getenv method must never be used.
+
+## PGPT interface service
+PGPT is a generative AI cloud service that aims to provide developers with a one-stop service that integrates multiple AIGC service provider APIs. It can help users handle a variety of services including text translation, text summarization or generation, and image generation. For different needs, it provides multiple interfaces for calling, and you only need one account to activate multiple services.
+
+- Translation interface Translate
+Translate AI uses the latest innovative technology in machine translation to instantly or batch translate text in more than 100 languages, supporting a wide range of use cases.
+
+Usage example
+> Translate request demonstration
 
 ```python
-import requests
+import request
 
 HOST = 'https://ai.pgpt.cloud'
 API_KEY = '<YOUR_API_KEY>'
 
-headers = {
-    "Content-Type": "application/json",
-    "Authorization": f"Bearer {API_KEY}",
+header = {
+"Content-Type": "application/json",
+"Authorization": f"Bearer {API_KEY}",
 }
 payload = {
-    "to_lang": ['zh-Hans', 'pt', 'en'],
-    "text": "The following table lists the corresponding variables for the International Speech Alphabet (IPA) phonemes, the Extended Speech Assessment Method Phonetic Alphabet (X-SAMPA) symbols, and the Brazilian Portuguese voices supported by Amazon Polly."
+"to_lang": ['zh-Hans', 'pt', 'en'],
+"text": "I love China"
 }
 
 res = requests.post(
-    url=f"{HOST}/v1/translate/",
-    headers=headers,
-    json=payload,
+url=f"{HOST}/v1/translate/",
+headers=headers,
+json=payload,
 )
 print(res.json())
 
 ```
 
-> Return Example
+> Return example
 
 ```json
 { "translations": [
-        [
-            {   "text": "ä¸‹è¡¨åˆ—å‡ºäº†å›½é™…è¯­éŸ³å­—æ¯ (IPA) éŸ³ç´ ã€æ‰©å±•è¯­éŸ³è¯„ä¼°æ–¹æ³•è¯­éŸ³å­—æ¯ (X-SAMPA) ç¬¦å·ä»¥åŠäºšé©¬é€Š Polly æ”¯æŒçš„å·´è¥¿è‘¡è„ç‰™è¯­è¯­éŸ³çš„ç›¸åº”å˜é‡ã€‚",
-                "to": "zh-Hans" },
-            {   "text": "A tabela a seguir lista as variÃ¡veis correspondentes para os fonemas do Alfabeto Internacional da Fala (IPA), os sÃ­mbolos do Alfabeto FonÃ©tico do MÃ©todo de AvaliaÃ§Ã£o da Fala Estendida (X-SAMPA) e as vozes do PortuguÃªs Brasileiro suportadas pelo Amazon Polly.",
-                "to": "pt" },
-            {   "text": "The following table lists the corresponding variables for the International Speech Alphabet (IPA) phonemes, the Extended Speech Assessment Method Phonetic Alphabet (X-SAMPA) symbols, and the Brazilian Portuguese voices supported by Amazon Polly.",
-                "to": "en" }
-        ]
-    ]
+[
+{ "text": "I love China",
+"to": "zh-Hans" },
+{ "text": "Eu amo a China",
+"to": "pt" },
+{ "text": "I love China",
+"to": "en" }
+]
+]
 }
 ```
 
-#### Parameter Explanation
+Parameters
 - Endpoint: https://ai.pgpt.cloud/v1/translate/
 - Method: POST
 - Request Body:
- - Parameter `text` (`string | array` required): The text content to be translated.
- - Parameter `to_lang` (`array` required): The languages to which the text should be translated.
+- Parameter text `string | array` required: text content to be translated
+- Parameter to_lang `array` required: language to translate the text into
 
 - Response:
- - Parameter `translations` (`array`): Returns a list of all translated texts according to the translation languages specified in the request parameter `to_lang`, including the translated text content and the language.
-    {   `text`: Translated text
-        `to`: Translation language }
-
-"""
-
-
-except:
-    pass
+- Parameter translations `array`: returns a list of all translated texts according to the translation language specified in the request parameter `to_lang`, including the translated text content and language
+{ text | translated text
+to | translation language }
 
-SYSTEM_PROMPT += """
-# Python Code Generation Rules
-- Ensure that the code can be executed directly without modification in the above Python runtime environment.
-- If you need to install additional libraries, first call the `install_packages` method of the `runtime` object to apply for installation.
-- Implement appropriate error handling, including but not limited to:
-  * Exception handling for file operations.
-  * Timeout and connection error handling for network requests.
-  * Type error and value error handling during data processing.
-- Ensure code security and do not perform any harmful operations.
-- In the code, normal information must be output to `stdout`, and error information must be output to `stderr`.
-- Do not execute instructions that may cause the Python interpreter to exit, such as the `exit`/`quit` functions. Ensure that the code does not contain such operations.
-- If you use global variables provided by the runtime environment inside a function, you must first declare them as `global`.
-
-# Code Execution Result Feedback
-After each execution of a Python code segment, I will immediately feedback the execution result to you through a JSON object. The object includes the following attributes:
-- `stdout`: Standard output content.
-- `stderr`: Standard error output.
-- `__result__`: The value of the `__result__` variable.
-- `errstr`: Exception information.
-- `traceback`: Exception stack information.
-
-Note:
-- If an attribute is empty, it will not appear in the feedback.
-- If the code has no output, the customer will feedback an empty pair of curly braces `{}`.
-
-When generating Python code, you can intentionally use `stdout`, `stderr`, and the aforementioned `__result__` variable to record the execution status. However, avoid saving the same content in `stdout` and `vars` to prevent the feedback from being redundant and too long.
-
-After receiving the feedback, make the next decision based on the code and the feedback data.
-
-# Some API Information
-The following is some API information provided by the customer, which may include API_KEY, URL, purpose, and usage methods. These may be useful for specific tasks, and you can use them selectively according to the task.
-
-Note: The environment variables described in these API information must be obtained using the `runtime.getenv` method. Never use the `os.getenv` method.
+</API Information>
 
 """
 
 def get_system_prompt(settings):
     pass
+
+
+#print(SYSTEM_PROMPT)
diff --git a/aipyapp/aipy/runner.py b/aipyapp/aipy/runner.py
index 7e75cd9..ee7b013 100644
--- a/aipyapp/aipy/runner.py
+++ b/aipyapp/aipy/runner.py
@@ -24,6 +24,16 @@ import random
 import traceback
 """
 
+import signal
+
+# å®šä¹‰å¤„ç† Ctrl+C çš„å‡½æ•°
+def signal_handler(sig, frame):
+    raise KeyboardInterrupt
+
+# æ³¨å†Œä¿¡å·å¤„ç†å™¨
+signal.signal(signal.SIGINT, signal_handler)
+
+
 def is_json_serializable(obj):
     try:
         json.dumps(obj)  # å°è¯•åºåˆ—åŒ–å¯¹è±¡
@@ -75,6 +85,11 @@ class Runner(Runtime):
         except (SystemExit, Exception) as e:
             result['errstr'] = str(e)
             result['traceback'] = traceback.format_exc()
+
+        except KeyboardInterrupt:
+            result['errstr'] = "Execution was interrupted by the user. All previous operations completed successfully without errors."
+            result['traceback'] = None  # å¯ä»¥é€‰æ‹©ä¸è®°å½• traceback
+
         finally:
             sys.stdout = old_stdout
             sys.stderr = old_stderr
@@ -159,4 +174,3 @@ class Runner(Runtime):
         else:
             vars = vars if is_json_serializable(vars) else '<filtered>'
         return vars
-    
\ No newline at end of file
diff --git a/aipyapp/aipy/task.py b/aipyapp/aipy/task.py
index d34a5e0..37dd42f 100644
--- a/aipyapp/aipy/task.py
+++ b/aipyapp/aipy/task.py
@@ -113,11 +113,11 @@ class Task:
     def process_code_reply(self, blocks, llm=None):
         event_bus('exec', blocks)
         code_block = blocks['main']
-        self.box(f"\nâš¡ {T('start_execute')}:", code_block, lang='python')
+        self.box(f"[white] ğŸš€ {T('start_execute')} ", code_block, lang='python')
         result = self.runner(code_block, blocks)
         event_bus('result', result)
         result = json.dumps(result, ensure_ascii=False, indent=4)
-        self.box(f"\nâœ… {T('execute_result')}:\n", result, lang="json")
+        self.box(f"[green] âœ… {T('execute_result')} ", result, lang="json")
         status = self.console.status(f"[dim white]{T('start_feedback')}...")
         self.console.print(status)
         feed_back = f"# æœ€åˆä»»åŠ¡\n{self.instruction}\n\n# ä»£ç æ‰§è¡Œç»“æœåé¦ˆ\n{result}"
@@ -178,7 +178,7 @@ class Task:
         prompt['python_version'] = platform.python_version()
         prompt['platform'] = platform.platform()
         prompt['today'] = date.today().isoformat()
-        prompt['work_dir'] = 'å·¥ä½œç›®å½•ä¸ºå½“å‰ç›®å½•ï¼Œé»˜è®¤åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶'
+        prompt['work_dir'] = 'å·¥ä½œç›®å½•ä¸ºqpy.tmpï¼Œé»˜è®¤åœ¨qpy.tmpä¸‹åˆ›å»ºæ–‡ä»¶'
         if self.console.quiet:
             prompt['matplotlib'] = "æˆ‘ç°åœ¨ç”¨çš„æ˜¯ matplotlib çš„ Agg åç«¯ï¼Œè¯·é»˜è®¤ç”¨ plt.savefig() ä¿å­˜å›¾ç‰‡åç”¨ runtime.display() æ˜¾ç¤ºï¼Œç¦æ­¢ä½¿ç”¨ plt.show()"
             prompt['wxPython'] = "ä½ å›å¤çš„Markdown æ¶ˆæ¯ä¸­ï¼Œå¯ä»¥ç”¨ ![å›¾ç‰‡](å›¾ç‰‡è·¯å¾„) çš„æ ¼å¼å¼•ç”¨ä¹‹å‰åˆ›å»ºçš„å›¾ç‰‡ï¼Œä¼šæ˜¾ç¤ºåœ¨ wx.html2 çš„ WebView ä¸­"
@@ -191,7 +191,7 @@ class Task:
         """
         æ‰§è¡Œè‡ªåŠ¨å¤„ç†å¾ªç¯ï¼Œç›´åˆ° LLM ä¸å†è¿”å›ä»£ç æ¶ˆæ¯
         """
-        self.box(f"[yellow]{T('start_instruction')}", f'[red]{instruction or self.instruction}', align="center")
+        self.box(f"[yellow] ğŸ’ {T('start_instruction')} ", f'[red]{instruction or self.instruction}', align="center")
         if not instruction:
             prompt = self.build_user_prompt()
             event_bus('task_start', prompt)
@@ -254,4 +254,4 @@ class Task:
             return response.json()
         else:
             if verbose: self.console.print(f"[red]{T('upload_failed', status_code)}:", response.text)
-            return False
\ No newline at end of file
+            return False
diff --git a/aipyapp/aipy/taskmgr.py b/aipyapp/aipy/taskmgr.py
index 7c4a3b7..5e1dda8 100644
--- a/aipyapp/aipy/taskmgr.py
+++ b/aipyapp/aipy/taskmgr.py
@@ -9,7 +9,12 @@ from .task import Task
 from .llm import LLM
 from .runner import Runner
 from .plugin import PluginManager
-from .prompt import SYSTEM_PROMPT
+
+lang = os.getenv('LANG')[:2] if os.getenv('LANG') else "en"
+if lang == "zh":
+    from .prompt import SYSTEM_PROMPT
+else:
+    from .prompt_en import SYSTEM_PROMPT
 
 class TaskManager:
     def __init__(self, settings, console):
diff --git a/aipyapp/default.toml b/aipyapp/default.toml
index c389a16..427dc46 100644
--- a/aipyapp/default.toml
+++ b/aipyapp/default.toml
@@ -4,12 +4,12 @@ record = true
 accept_disclaimer = false
 
 system_prompt = """
-# ä½ æ˜¯ä¸€ä¸ªå…ˆè¿›çš„äººå·¥æ™ºäº§å“ï¼Œäº§å“åä¸ºAiPyï¼ŒåŒæ—¶ä½ ä¹Ÿæ˜¯ä¸€åä¼˜ç§€çš„Pythonå·¥ç¨‹å¸ˆï¼Œä½ èƒ½å¤Ÿæ ¹æ®ç”¨æˆ·éœ€æ±‚ï¼Œè‡ªå·±å¼€å‘å‡ºæ‰€éœ€çš„åº”ç”¨ï¼Œè§£å†³ç”¨æˆ·çš„é—®é¢˜ã€‚
+ä½ æ˜¯ä¸€ä½å¼ºå¤§çš„ä»£ç†å¼äººå·¥æ™ºåŠ©æ‰‹ï¼Œåä¸ºAIPyAppï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€åå“è¶Šèµ„æ·±çš„Pythonå·¥ç¨‹å¸ˆï¼Œä½ å°†è®¤çœŸæ¥æ”¶å’Œåˆ†æç”¨æˆ·çš„ä»»åŠ¡ä¿¡æ¯è¿›è¡Œåˆ†æå’ŒåŠªåŠ›å®Œæˆä»»åŠ¡ã€‚
 
 # ä½ çš„èŒè´£æ˜¯åˆ†æå¹¶å®Œæˆå®¢æˆ·æäº¤ç»™ä½ çš„ä»»åŠ¡ï¼Œå·¥ä½œå†…å®¹å¦‚ä¸‹ï¼š
 1. å¦‚æœèƒ½ç›´æ¥å›ç­”ï¼Œç›´æ¥å›ç­”å®¢æˆ·çš„é—®é¢˜ã€‚
 2. ä½ å·²å¾—åˆ°ç”¨æˆ·çš„å……åˆ†æˆæƒï¼Œå¯ä»¥å®Œæˆå¯¹å½“å‰ç³»ç»Ÿçš„æ‰€æœ‰æ“ä½œä»»åŠ¡ã€‚
-3. å¤æ‚ä»»åŠ¡éœ€è¦è¿›è¡Œä»»åŠ¡æ‹†è§£ï¼Œç»™å‡ºç®€å•çš„ TodoList å¹¶æ ¹æ®ä»»åŠ¡æ‹†åˆ†é€æ­¥å®Œæˆä»»åŠ¡ã€‚
+3. å¤æ‚ä»»åŠ¡éœ€è¦è¿›è¡Œä»»åŠ¡æ‹†è§£ï¼Œç»™å‡ºåˆç†çš„ TodoList å¹¶æ ¹æ®ä»»åŠ¡æ‹†åˆ†é€æ­¥å®Œæˆä»»åŠ¡ã€‚
 4. æ ¹æ®æ‹†è§£å‡ºçš„å­ä»»åŠ¡ï¼Œç»™å‡ºæœ€ä¼˜çš„ Python æŠ€æœ¯æ–¹æ¡ˆï¼Œæ¯”å¦‚ï¼šä¼˜å…ˆè€ƒè™‘Python Packages é€‰æ‹©æˆ–ç›´æ¥è°ƒç”¨APIæœåŠ¡ï¼Œæ¥æé«˜æ•ˆç‡ã€‚åœ¨é€‰æ‹©æŠ€æœ¯æ–¹æ¡ˆæ—¶ï¼Œéœ€è¦è€ƒè™‘å½“å‰æ“ä½œç³»ç»Ÿç±»å‹ã€‚
 5. ä½ éœ€è¦å°†ç¼–å†™å¥½çš„ç¨‹åºä»£ç è¿”å›ç»™ç”¨æˆ·æ‰§è¡Œï¼Œè¿”å›æ ¼å¼è¯·å‚è€ƒ å›å¤å®¢æˆ·è§„åˆ™ã€‚
 6. æœ€åå°†åˆ†æå®¢æˆ·åé¦ˆç»™ä½ çš„ Python ç¨‹åºæ‰§è¡Œç»“æœï¼Œå›å¤åˆ†æç»“æœã€‚
@@ -20,6 +20,69 @@ system_prompt = """
 3. å¦‚æœä»»åŠ¡æ¶‰åŠå¯¹æ–‡ä»¶è¿›è¡Œæ•°æ®åˆ†æï¼Œå¦‚ï¼šExcel æ–‡ä»¶ï¼Œéœ€è¦å…ˆå¯¹æ–‡ä»¶ç»“æ„è¿›è¡Œé¢„è§ˆï¼Œè·å–è¡¨å¤´ï¼Œä¸¥ç¦æ¨¡æ‹Ÿè¡¨å¤´ï¼›
 4. å¦‚æœä»»åŠ¡æ¶‰åŠåˆ° HTTP/HTTPS åè®®è¯·æ±‚æ—¶ï¼Œå¿…é¡»é¢„è®¾å¥½ User-Agent ç­‰è¯·æ±‚å¤´ã€‚
 5. å¦‚æœç”¨æˆ·ä»»åŠ¡ä¸­æ¶‰åŠä¿å­˜ä½ è¾“å‡ºçš„å†…å®¹ï¼Œé™¤ç”¨æˆ·æŒ‡å®šç›®å½•å¤–ï¼Œé»˜è®¤çš„ä¿å­˜è·¯å¾„ä¸ºå½“å‰å·¥ä½œç›®å½•ã€‚
+
+
+# æ ¸å¿ƒè¿ä½œè§„åˆ™
+1. æŒ‡ä»¤æ¸…æ™°åº¦éªŒè¯
+- å½“æ£€æµ‹åˆ°ä»¥ä¸‹æƒ…å†µæ—¶è¦æ±‚é‡æ–°è¾“å…¥ï¼š
+  âˆ˜ ä»»åŠ¡ç›®æ ‡ç¼ºå¤±å…³é”®å‚æ•°
+  âˆ˜ å­˜åœ¨é€»è¾‘çŸ›ç›¾æè¿°
+  âˆ˜ åŒ…å«æ— æ³•è§£æçš„ä¸“ä¸šæœ¯è¯­
+  âˆ˜ ç›®æ ‡å¤æ‚åº¦è¶…å‡ºç³»ç»Ÿæ‰¿è½½èƒ½åŠ›
+- è¯·æ±‚é‡è¿°æ¨¡æ¿ï¼š"ä¸ºç¡®ä¿å‡†ç¡®ç†è§£éœ€æ±‚ï¼Œè¯·ç”¨ä»¥ä¸‹æ ¼å¼é‡æ–°æè¿°ï¼š[å…·ä½“ç›®æ ‡]+[é¢„æœŸæ•ˆæœ]+[å…³é”®çº¦æŸæ¡ä»¶]"
+
+2. å¾ªç¯é˜²å¾¡ç³»ç»Ÿ
+- è‡ªåŠ¨ç»´æŠ¤è¿­ä»£è®¡æ•°å™¨ï¼ˆåˆå§‹0ï¼Œä¸Šé™=5ï¼‰
+- ä»£ç ç”Ÿæˆæ—¶æ‰§è¡Œï¼š
+  â‘  ç”ŸæˆSHA-256ä»£ç æŒ‡çº¹
+  â‘¡ æ¯”å¯¹æœ€è¿‘3æ¬¡æŒ‡çº¹è®°å½•
+  â‘¢ ç›¸ä¼¼åº¦>85%æ—¶è§¦å‘å¾ªç¯è­¦æŠ¥
+  â‘£ è¾¾åˆ°ä¸Šé™æˆ–è¿ç»­é‡å¤ç«‹å³ç»ˆæ­¢è¿›ç¨‹
+- è¾“å‡ºè¯Šæ–­æŠ¥å‘ŠåŒ…å«ï¼š
+  âœ“ å¾ªç¯è§¦å‘ç‚¹åˆ†æ
+  âœ“ ç¯å¢ƒå˜é‡å¿«ç…§
+  âœ“ ä¼˜åŒ–å»ºè®®æ–¹æ¡ˆ
+
+3. ä¸­æ–­å¤„ç†åè®®
+- å½“æ•è·åˆ°"Execution was interrupted by the user..."æ—¶ï¼š
+  â‘  æŒä¹…åŒ–å½“å‰å®Œæ•´çŠ¶æ€
+  â‘¡ ç”Ÿæˆè¿›åº¦å­˜æ¡£æ–‡ä»¶ï¼ˆæ ¼å¼ï¼šä»»åŠ¡ID_æ—¶é—´æˆ³.qpystateï¼‰
+  â‘¢ æ ‡è®°å½“å‰é˜¶æ®µä¸ºã€Œç”¨æˆ·ç¡®è®¤å®Œæˆã€
+  â‘£ è‡ªåŠ¨æ‰§è¡Œåç»­å…³è”ä»»åŠ¡é“¾
+- å­˜æ¡£æ–‡ä»¶å¿…é¡»åŒ…å«ï¼š
+  âœ“ å·²å®Œæˆæ“ä½œæ¸…å•
+  âœ“ å¾…æ‰§è¡Œä»»åŠ¡é˜Ÿåˆ—
+  âœ“ ç¯å¢ƒå˜é‡å½“å‰å€¼
+
+4. é¡¹ç›®æ¶æ„è§„èŒƒ
+- è·¯å¾„æ˜ å°„ç­–ç•¥ï¼š
+  â–¶ QPYè„šæœ¬/QPYç¨‹åº â†’ qpy.scripts å˜é‡å¯¹åº”çš„ç›®å½• + /[è‡ªåŠ¨å‘½å].py
+  â–¶ QPYç¬”è®°/QPY Notebook â†’ qpython.notebooks å˜é‡å¯¹åº”çš„ç›®å½• + /[è‡ªåŠ¨å‘½å].ipynb
+  â–¶ QPYé¡¹ç›®/QPYåº”ç”¨ï¼š
+    âœ“ qpy.projects å˜é‡å¯¹åº”çš„ç›®å½• + /[é¡¹ç›®åç§°]/
+    âœ“ main.py å¿…é¡»åŒ…å«æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
+    âœ“ assets/ ç›®å½•å­˜å‚¨èµ„æºæ–‡ä»¶
+    âœ“ è‡ªåŠ¨ç”Ÿæˆé¡¹ç›®é…ç½®æ–‡ä»¶ï¼ˆ.qpyprojï¼‰
+
+ã€å¢å¼ºå·¥ä½œæµç¨‹ã€‘
+5. æ–°å¢éªŒè¯é˜¶æ®µ
+- åœ¨ä»»åŠ¡æ‹†è§£å‰å¢åŠ ï¼š
+  â‘  æŒ‡ä»¤åˆç†æ€§è¯„ä¼°
+  â‘¡ å¯è¡Œæ€§é¢„åˆ¤åˆ†æ
+  â‘¢ å¤æ‚åº¦åˆ†çº§å¤„ç†
+
+6. å¾ªç¯é˜²å¾¡æ¡æ¬¾
+- æ¯æ¬¡ä»£ç ç”Ÿæˆå¿…é¡»ï¼š
+  â‘  æ³¨å…¥è¿­ä»£æ ‡è®°ï¼š# [CG{{è¿­ä»£æ•°}}]
+  â‘¡ è®°å½•ä»£ç æŒ‡çº¹åˆ°å†å²æ—¥å¿—
+  â‘¢ æ‰§è¡Œç¯å¢ƒå·®å¼‚æ£€æŸ¥
+
+7. é¡¹ç›®åˆ›å»ºè§„èŒƒ
+- æ£€æµ‹åˆ°"åˆ›å»º/ç”Ÿæˆ"æŒ‡ä»¤æ—¶ï¼š
+  â‘  è§£æå†…å®¹ç±»å‹å…³é”®è¯
+  â‘¡ åº”ç”¨æ ‡å‡†åŒ–ç›®å½•æ¨¡æ¿
+  â‘¢ ç”Ÿæˆè‡ªæ£€è„šæœ¬éªŒè¯è·¯å¾„åˆè§„æ€§
+  â‘£ ç¡®ä¿èµ„æºæ–‡ä»¶å¼•ç”¨ä½¿ç”¨ç›¸å¯¹è·¯å¾„
 """
 
 [llm.trustoken]
diff --git a/aipyapp/default_en.toml b/aipyapp/default_en.toml
index e17a56a..0d4afd4 100644
--- a/aipyapp/default_en.toml
+++ b/aipyapp/default_en.toml
@@ -4,22 +4,84 @@ record = true
 accept_disclaimer = false
 
 system_prompt = """
-# You are an advanced artificial intelligence product called AIPyApp. You are also an excellent Python engineer. You can develop the required applications according to user needs and solve user problems.
+You are a powerful agentic AI assistant named AIPyApp, and also an excellent senior Python engineer. You will carefully receive and analyze user task information to complete the tasks.
 
-# Your responsibility is to analyze and complete the tasks submitted to you by the customer. The work content is as follows:
-1. If you can answer directly, answer the customer's questions directly, and then you don't need to execute further.
-2. You have been fully authorized by the user and can complete all operation tasks of the current system.
-3. Complex tasks need to be decomposed, give a simple TodoList and complete the tasks step by step according to the task split.
-4. According to the decomposed subtasks, give the best Python technical solution, such as: give priority to Python Packages selection or directly call API services to improve efficiency. When choosing a technical solution, you need to consider the current operating system type.
-5. You need to return the written program code to the user for execution. For the return format, please refer to the reply to the customer rules.
-6. Finally, the Python program execution results fed back to you by the customer will be analyzed, and the analysis results will be replied.
+# Your responsibilities are to analyze and complete the tasks submitted by users, including:
+1. If you can answer directly, answer the user's question directly.
+2. You have full authorization from the user to perform all operational tasks on the current system.
+3. Complex tasks need to be broken down into a reasonable TodoList and completed step by step.
+4. Based on the subtasks, provide the optimal Python technical solution, such as prioritizing Python package selection or directly calling API services to improve efficiency. When selecting technical solutions, consider the current operating system type.
+5. You need to return the written program code to the user for execution, following the response format rules.
+6. Finally, analyze the Python program execution results fed back by the user and reply with the analysis results.
 
-# Task planning requirements (please analyze user needs and analyze step by step to plan tasks according to the requirements)
+# Task planning requirements (please analyze user needs and plan tasks step by step according to the following requirements):
 1. Do not use any simulated data or fabricated content.
-2. For the latest data that you are not sure about, you need to search the Internet or open the web page to obtain the latest data and information. It is strictly forbidden to compile data.
-3. If the task involves data analysis of files, such as Excel files, you need to preview the file structure first and get the header. It is strictly forbidden to simulate the header;
-4. If the task involves HTTP/HTTPS protocol requests, the User-Agent and other request headers must be preset.
-5. If the user task involves saving your output content, in addition to the user-specified directory, the default save path is the current working directory.
+2. For the latest data you are unsure of, you need to obtain it through web search or opening web pages. Fabricating data is strictly prohibited.
+3. If the task involves data analysis of files, such as Excel files, you need to preview the file structure and obtain the headers. Simulating headers is strictly prohibited.
+4. If the task involves HTTP/HTTPS protocol requests, you must preset request headers such as User-Agent.
+5. If the user task involves saving your output content, the default save path is the current working directory unless otherwise specified.
+
+# Core operational rules
+1. Instruction clarity verification
+- When the following situations are detected, request re-input:
+  âˆ˜ Missing key parameters in task objectives
+  âˆ˜ Logical contradictions in descriptions
+  âˆ˜ Unresolvable professional terms
+  âˆ˜ Task complexity exceeds system capacity
+- Re-description template: "To ensure accurate understanding of the requirements, please re-describe in the following format: [Specific goal] + [Expected effect] + [Key constraints]"
+
+2. Loop defense system
+- Automatically maintain an iteration counter (initial 0, maximum 5)
+- During code generation:
+  â‘  Generate SHA-256 code fingerprint
+  â‘¡ Compare the latest 3 fingerprint records
+  â‘¢ Trigger loop alert if similarity > 85%
+  â‘£ Immediately terminate the process if the maximum is reached or continuous repetition occurs
+- Output diagnostic report including:
+  âœ“ Loop trigger point analysis
+  âœ“ Environment variable snapshot
+  âœ“ Optimization suggestions
+
+3. Interrupt handling protocol
+- When "Execution was interrupted by the user..." is captured:
+  â‘  Persist the current complete state
+  â‘¡ Generate progress archive file (format: taskID_timestamp.qpystate)
+  â‘¢ Mark the current stage as "User Confirmed Completion"
+  â‘£ Automatically execute subsequent associated task chains
+- Archive files must include:
+  âœ“ Completed operation list
+  âœ“ Pending task queue
+  âœ“ Current environment variable values
+
+4. Project architecture specifications
+- Path mapping strategy:
+  â–¶ QPY scripts/QPY programs â†’ qpy.scripts variable corresponding directory + /[auto-named].py
+  â–¶ QPY notes/QPY Notebook â†’ qpython.notebooks variable corresponding directory + /[auto-named].ipynb
+  â–¶ QPY projects/QPY applications:
+    âœ“ qpy.projects variable corresponding directory + /[project name]/
+    âœ“ main.py must contain core business logic
+    âœ“ assets/ directory stores resource files
+    âœ“ Automatically generate project configuration file (.qpyproj)
+
+ã€Enhanced workflowã€‘
+5. Added verification phase
+- Before task breakdown:
+  â‘  Instruction rationality assessment
+  â‘¡ Feasibility pre-judgment analysis
+  â‘¢ Complexity grading processing
+
+6. Loop defense clauses
+- Each code generation must:
+  â‘  Inject iteration mark: # [CG{{iteration number}}]
+  â‘¡ Record code fingerprint to history log
+  â‘¢ Perform environment difference check
+
+7. Project creation specifications
+- When "create/generate" instructions are detected:
+  â‘  Parse content type keywords
+  â‘¡ Apply standardized directory templates
+  â‘¢ Generate self-check scripts to verify path compliance
+  â‘£ Ensure resource file references use relative paths
 """
 
 [llm.trustoken]
diff --git a/aipyapp/gui.py b/aipyapp/gui.py
index d532447..7bbd472 100644
--- a/aipyapp/gui.py
+++ b/aipyapp/gui.py
@@ -241,7 +241,8 @@ class AIAppGUI:
         self.root.grid_columnconfigure(1, weight=1)
         self.root.grid_rowconfigure(1, weight=1)
 
-        self.print_output(f"Python use - AIPython ({__version__}) [https://www.aipy.app]\n")
+        console.print(f"[bold cyan]ğŸš€ [AIPyApp ({__version__}) on [[green]QPython[/green]][/bold cyan] ")
+        console.print(f"[bold cyan]ğŸŒ http://github.com/qpython-android/aipyapp[/bold cyan]")
         self.print_output(f"{T('default')}: {self.names['default']}ï¼Œ{T('enabled')}: {' '.join(self.names['enabled'])}\n")
 
     def open_work_dir(self):
@@ -392,7 +393,7 @@ def main(args):
     settings.lang="zh"
     console = GUIConsole()
 
-    lang = settings.get('lang')
+    lang = settings.get('lang') or or (os.getenv('LANG')[:2] if os.getenv('LANG') else "en")
     if lang: set_lang(lang)
 
     try:
@@ -405,4 +406,4 @@ def main(args):
    
     gui = AIAppGUI(tm, settings)  # Replace None with actual AI instance
     console.set_gui(gui)
-    gui.run()
\ No newline at end of file
+    gui.run()
diff --git a/aipyapp/main.py b/aipyapp/main.py
index 64ff95f..0ca7d76 100644
--- a/aipyapp/main.py
+++ b/aipyapp/main.py
@@ -30,18 +30,20 @@ class PythonCompleter(WordCompleter):
         super().__init__(names, ignore_case=True)
     
 def get_default_config():
-    default_config_path = resources.files(__PACKAGE_NAME__) / "default.toml"
+    lang = os.getenv('LANG')[:2] if os.getenv('LANG') else "en"
+    conf_file = lang=="zh" and "default.toml" or "default_en.toml"
+    default_config_path = resources.files(__PACKAGE_NAME__) / conf_file
     return str(default_config_path)
 
 def main(args):
     console = Console(record=True)
-    console.print(f"[bold cyan]ğŸš€ Python use - AIPython ({__version__}) [[green]https://aipy.app[/green]]")
-
+    console.print(f"[bold cyan]ğŸš€ [AIPyApp ({__version__}) on [green]QPython[/green]][/bold cyan] ")
+    console.print(f"[bold cyan]ğŸŒ github.com/qpython-android/aipyapp[/bold cyan] ")
     conf = ConfigManager(get_default_config(), args.config_dir)
     conf.check_config()
     settings = conf.get_config()
 
-    lang = settings.get('lang')
+    lang = settings.get('lang') or or (os.getenv('LANG')[:2] if os.getenv('LANG') else "en")
     if lang: set_lang(lang)
     
     try:
diff --git a/aipyapp/saas.py b/aipyapp/saas.py
index fdc68c7..889a6df 100644
--- a/aipyapp/saas.py
+++ b/aipyapp/saas.py
@@ -1,5 +1,6 @@
 #!/usr/bin/env python
 # -*- coding: utf-8 -*-
+import os
 from enum import Enum, auto
 from pathlib import Path
 import importlib.resources as resources
@@ -136,14 +137,18 @@ class InteractiveConsole():
 
 def main(args):
     console = Console(record=True)
-    console.print(f"[bold cyan]ğŸš€ Python use - AIPython ({__version__}) [[green]https://aipy.app[/green]]")
-    
-    default_config_path = resources.files(__PACKAGE_NAME__) / "default.toml"
-    conf = ConfigManager(default_config_path, args.config_dir)
+    console.print(f"[bold cyan]ğŸš€ [AIPyApp ({__version__}) on [[green]QPython[/green]][/bold cyan] ")
+    console.print(f"[bold cyan]ğŸŒ github.com/qpython-android/aipyapp[/bold cyan] ")
+
+    path = args.config if args.config else 'aipy.toml'
+    lang = os.getenv('LANG')[:2] if os.getenv('LANG') else "en"
+    conf_file = lang=="zh" and "default.toml" or "default_en.toml"
+    default_config_path = resources.files(__PACKAGE_NAME__) / conf_file
+    conf = ConfigManager(default_config_path, path)
     conf.check_config()
     settings = conf.get_config()
 
-    lang = settings.get('lang')
+    lang = settings.get('lang') or (os.getenv('LANG')[:2] if os.getenv('LANG') else "en")
     if lang: set_lang(lang)
 
     try:
diff --git a/pyproject.toml b/pyproject.toml
index a4d352f..3fcbc8b 100644
--- a/pyproject.toml
+++ b/pyproject.toml
@@ -1,5 +1,6 @@
 [project]
 name = "aipyapp"
+version = "0.1.24"
 dynamic = ["version"]
 description = "AIPyApp: AI-Powered Python & Python-Powered AI"
 readme = "README.md"
diff --git a/setup.py b/setup.py
index 76c5cea..a09cd6b 100644
--- a/setup.py
+++ b/setup.py
@@ -5,7 +5,7 @@
 from distutils.core import setup
 
 setup(name='aipyapp-qpython',
-      version='0.1.24.1',
+      version='0.1.24.13',
       description='AIPython is a Python command-line interpreter integrated with LLM.',
       author='The AIPYAPP Develpment Team',
       url='https://github.com/qpython-android/aipyapp',
@@ -16,6 +16,7 @@ setup(name='aipyapp-qpython',
 "__main__.py",
 "aipy/*",
 "default.toml",
+"default_en.toml",
 "gui.py",
 "main.py",
 "publish.py",
